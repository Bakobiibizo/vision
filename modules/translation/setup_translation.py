import os
import base64
import subprocess

folder_path = f'modules/translation'

file_data = [
    ('data_models.py', 'aW1wb3J0IG9zCmltcG9ydCBiYXNlNjQKaW1wb3J0IHJlcXVlc3RzCmltcG9ydCB0b3JjaAppbXBvcnQganNvbgppbXBvcnQgc3VicHJvY2VzcwppbXBvcnQgdXZpY29ybgpmcm9tIHB5ZGFudGljIGltcG9ydCBCYXNlTW9kZWwsIENvbmZpZ0RpY3QKZnJvbSB0eXBpbmcgaW1wb3J0IFVuaW9uLCBPcHRpb25hbCwgQW55LCBEaWN0LCBMaXN0CmZyb20gc3Vic3RyYXRlaW50ZXJmYWNlLnV0aWxzIGltcG9ydCBzczU4CmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIGFiYyBpbXBvcnQgQUJDLCBhYnN0cmFjdG1ldGhvZApmcm9tIGZhc3RhcGkgaW1wb3J0IEFQSVJvdXRlciwgRmFzdEFQSQpmcm9tIGZhc3RhcGkubWlkZGxld2FyZS5jb3JzIGltcG9ydCBDT1JTTWlkZGxld2FyZQoKCmNsYXNzIE1vZHVsZUNvbmZpZyhCYXNlTW9kZWwpOgogICAgbW9kdWxlX25hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICBtb2R1bGVfcGF0aDogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIG1vZHVsZV9lbmRwb2ludDogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIG1vZHVsZV91cmw6IE9wdGlvbmFsW3N0cl0gPSBOb25lCgoKY2xhc3MgQmFzZU1vZHVsZShCYXNlTW9kZWwpOgogICAgbW9kdWxlX2NvbmZpZzogT3B0aW9uYWxbTW9kdWxlQ29uZmlnXSA9IE5vbmUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbW9kdWxlX2NvbmZpZzogTW9kdWxlQ29uZmlnKToKICAgICAgICAiIiIKICAgICAgICBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgQmFzZU1vZHVsZSBjbGFzcy4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgbW9kdWxlX2NvbmZpZyAoTW9kdWxlQ29uZmlnKTogVGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBtb2R1bGUuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIE5vbmUKCiAgICAgICAgVGhpcyBtZXRob2QgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIEJhc2VNb2R1bGUgY2xhc3Mgd2l0aCB0aGUgcHJvdmlkZWQgbW9kdWxlIGNvbmZpZ3VyYXRpb24uIEl0IHNldHMgdGhlIGBtb2R1bGVfY29uZmlnYCBhdHRyaWJ1dGUgdG8gdGhlIHByb3ZpZGVkIGBtb2R1bGVfY29uZmlnYCBhbmQgY2FsbHMgdGhlIGBpbml0X21vZHVsZWAgbWV0aG9kLgogICAgICAgICIiIgogICAgICAgIHN1cGVyKCkuX19pbml0X18obW9kdWxlX2NvbmZpZz1tb2R1bGVfY29uZmlnKQogICAgICAgIHNlbGYubW9kdWxlX2NvbmZpZyA9IG1vZHVsZV9jb25maWcKICAgICAgICBzZWxmLmluaXRfbW9kdWxlKCkKCiAgICBkZWYgaW5pdF9tb2R1bGUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgSW5pdGlhbGl6ZXMgdGhlIG1vZHVsZSBieSBjcmVhdGluZyB0aGUgbmVjZXNzYXJ5IGRpcmVjdG9yaWVzIGlmIHRoZXkgZG8gbm90IGV4aXN0IGFuZCBpbnN0YWxscyB0aGUgbW9kdWxlIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBjb25maWd1cmF0aW9uLgogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhzZWxmLm1vZHVsZV9jb25maWcubW9kdWxlX3BhdGgpOgogICAgICAgICAgICBvcy5tYWtlZGlycyhzZWxmLm1vZHVsZV9jb25maWcubW9kdWxlX3BhdGgpCiAgICAgICAgICAgIHNlbGYuaW5zdGFsbF9tb2R1bGUoc2VsZi5tb2R1bGVfY29uZmlnKQoKICAgIGRlZiBfY2hlY2tfYW5kX3Byb21wdChzZWxmLCBwYXRoOiBQYXRoLCBtZXNzYWdlOiBzdHIpIC0+IE9wdGlvbmFsW3N0cl06CiAgICAgICAgIiIiCiAgICAgICAgQ2hlY2sgaWYgYSBmaWxlIGV4aXN0cyBhdCB0aGUgZ2l2ZW4gcGF0aCBhbmQgcHJvbXB0IHRoZSB1c2VyIHRvIG92ZXJ3cml0ZSBpdCBpZiBpdCBkb2VzLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBwYXRoIChQYXRoKTogVGhlIHBhdGggdG8gdGhlIGZpbGUuCiAgICAgICAgICAgIG1lc3NhZ2UgKHN0cik6IFRoZSBtZXNzYWdlIHRvIGRpc3BsYXkgdG8gdGhlIHVzZXIgYmVmb3JlIHByb21wdGluZy4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgT3B0aW9uYWxbc3RyXTogSWYgdGhlIGZpbGUgZXhpc3RzIGFuZCB0aGUgdXNlciBjaG9vc2VzIHRvIG92ZXJ3cml0ZSBpdCwgcmV0dXJucyBOb25lLgogICAgICAgICAgICAgICAgICAgICAgICAgICBJZiB0aGUgZmlsZSBkb2VzIG5vdCBleGlzdCwgcmV0dXJucyBOb25lLgogICAgICAgICAgICAgICAgICAgICAgICAgICBJZiB0aGUgZmlsZSBleGlzdHMgYW5kIHRoZSB1c2VyIGNob29zZXMgbm90IHRvIG92ZXJ3cml0ZSBpdCwgcmV0dXJucyB0aGUgY29udGVudCBvZiB0aGUgZmlsZS4KICAgICAgICAiIiIKICAgICAgICBpZiBwYXRoLmV4aXN0cygpOgogICAgICAgICAgICBjb250ZW50ID0gcGF0aC5yZWFkX3RleHQoZW5jb2Rpbmc9InV0Zi04IikKICAgICAgICAgICAgcHJpbnQoY29udGVudCkKICAgICAgICAgICAgdXNlcl9pbnB1dCA9IGlucHV0KGYie21lc3NhZ2V9IERvIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSBpdD8gKHkvbikgIikubG93ZXIoKQogICAgICAgICAgICByZXR1cm4gTm9uZSBpZiB1c2VyX2lucHV0IGluIFsieSIsICJ5ZXMiXSBlbHNlIGNvbnRlbnQKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBjaGVja19wdWJsaWNfa2V5KHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06CiAgICAgICAgIiIiCiAgICAgICAgQ2hlY2sgaWYgYSBwdWJsaWMga2V5IGV4aXN0cyBhdCB0aGUgc3BlY2lmaWVkIHBhdGggYW5kIHByb21wdCB0aGUgdXNlciBiYXNlZCBvbiB0aGUgZXhpc3RlbmNlIG9mIHRoZSBrZXkuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIE9wdGlvbmFsW3N0cl06IElmIHRoZSBwdWJsaWMga2V5IGV4aXN0cyBhbmQgdGhlIHVzZXIgY2hvb3NlcyBub3QgdG8gb3ZlcndyaXRlIGl0LCByZXR1cm5zIHRoZSBjb250ZW50IG9mIHRoZSBrZXkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHRoZSBwdWJsaWMga2V5IGRvZXMgbm90IGV4aXN0IG9yIHRoZSB1c2VyIGNob29zZXMgdG8gb3ZlcndyaXRlIGl0LCByZXR1cm5zIE5vbmUuCiAgICAgICAgIiIiCiAgICAgICAgcHVibGljX2tleV9wYXRoID0gUGF0aCgiZGF0YS9wdWJsaWNfa2V5LnB1YiIpCiAgICAgICAgcmV0dXJuIHNlbGYuX2NoZWNrX2FuZF9wcm9tcHQocHVibGljX2tleV9wYXRoLCAiUHVibGljIGtleSBleGlzdHMuIikKCiAgICBkZWYgZ2V0X3B1YmxpY19rZXkoCiAgICAgICAgc2VsZiwga2V5X25hbWU6IHN0ciA9ICJwdWJsaWNfa2V5IiwgcHVibGljX2tleV9wYXRoOiBzdHIgPSAiZGF0YS9wdWJsaWNfa2V5LnBlbSIKICAgICk6CiAgICAgICAgIiIiCiAgICAgICAgUmV0cmlldmVzIHRoZSBwdWJsaWMga2V5IGZvciBhIHNwZWNpZmllZCBrZXkgbmFtZSBmcm9tIGEgZ2l2ZW4gbW9kdWxlIFVSTC4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgc2VsZjogVGhlIG9iamVjdCBpbnN0YW5jZS4KICAgICAgICAgICAga2V5X25hbWUgKHN0cik6IFRoZSBuYW1lIG9mIHRoZSBrZXkgdG8gcmV0cmlldmUuIERlZmF1bHRzIHRvICJwdWJsaWNfa2V5Ii4KICAgICAgICAgICAgcHVibGljX2tleV9wYXRoIChzdHIpOiBUaGUgcGF0aCB0byBzYXZlIHRoZSBwdWJsaWMga2V5LiBEZWZhdWx0cyB0byAiZGF0YS9wdWJsaWNfa2V5LnBlbSIuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIHN0cjogVGhlIHB1YmxpYyBrZXkgcmV0cmlldmVkIG9yIHRoZSBleGlzdGluZyBrZXkgaWYgaXQgZXhpc3RzLgogICAgICAgICIiIgogICAgICAgIHB1YmxpY19rZXkgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgIGYie3NlbGYubW9kdWxlX2NvbmZpZy5tb2R1bGVfdXJsfS9tb2R1bGVzL3trZXlfbmFtZX0iLCB0aW1lb3V0PTMwCiAgICAgICAgKS50ZXh0CiAgICAgICAgb3MubWFrZWRpcnMoImRhdGEiLCBleGlzdF9vaz1UcnVlKQogICAgICAgIGV4aXN0aW5nX2tleSA9IHNlbGYuY2hlY2tfcHVibGljX2tleSgpCiAgICAgICAgaWYgZXhpc3Rpbmdfa2V5IGlzIE5vbmU6CiAgICAgICAgICAgIFBhdGgocHVibGljX2tleV9wYXRoKS53cml0ZV90ZXh0KHB1YmxpY19rZXksIGVuY29kaW5nPSJ1dGYtOCIpCiAgICAgICAgcmV0dXJuIGV4aXN0aW5nX2tleSBvciBwdWJsaWNfa2V5CgogICAgZGVmIGNoZWNrX2Zvcl9leGlzdGluZ19tb2R1bGUoc2VsZikgLT4gT3B0aW9uYWxbc3RyXToKICAgICAgICAiIiIKICAgICAgICBDaGVjayBmb3IgYW4gZXhpc3RpbmcgbW9kdWxlIHNldHVwIGZpbGUgYXQgdGhlIHNwZWNpZmllZCBwYXRoIGFuZCByZXR1cm4gdGhlIHJlc3VsdC4KICAgICAgICAiIiIKICAgICAgICBtb2R1bGVfc2V0dXBfcGF0aCA9IFBhdGgoCiAgICAgICAgICAgIGYie3NlbGYubW9kdWxlX2NvbmZpZy5tb2R1bGVfcGF0aH0vc2V0dXBfe3NlbGYubW9kdWxlX2NvbmZpZy5tb2R1bGVfbmFtZX0ucHkiCiAgICAgICAgKQogICAgICAgIHJldHVybiBzZWxmLl9jaGVja19hbmRfcHJvbXB0KG1vZHVsZV9zZXR1cF9wYXRoLCAiTW9kdWxlIGV4aXN0cy4iKQoKICAgIGRlZiBnZXRfbW9kdWxlKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIEEgZGVzY3JpcHRpb24gb2YgdGhlIGVudGlyZSBmdW5jdGlvbiwgaXRzIHBhcmFtZXRlcnMsIGFuZCBpdHMgcmV0dXJuIHR5cGVzLgogICAgICAgICIiIgogICAgICAgIG5hbWUgPSBvcy5nZXRlbnYoIk1PRFVMRV9OQU1FIikKICAgICAgICBlbmRwb2ludCA9IG9zLmdldGVudigiTU9EVUxFX0VORFBPSU5UIikKICAgICAgICB1cmwgPSBvcy5nZXRlbnYoIk1PRFVMRV9VUkwiKQogICAgICAgIGZpbGVwYXRoID0gZiJ7b3MuZ2V0ZW52KCdNT0RVTEVfUEFUSCcpfS9zZXR1cF97bmFtZX0ucHkiCiAgICAgICAgCiAgICAgICAgbW9kdWxlID0ganNvbi5sb2FkcyhyZXF1ZXN0cy5nZXQoZiJ7dXJsfXtlbmRwb2ludH0iKS5qc29uKCkpCiAgICAgICAgCiAgICAgICAgZmlsZXBhdGggPSBQYXRoKGZpbGVwYXRoKQogICAgICAgIAogICAgICAgIGlmIG5vdCBmaWxlcGF0aC5leGlzdHMoKToKICAgICAgICAgICAgZmlsZXBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSkKICAgICAgICAKICAgICAgICBmaWxlcGF0aC53cml0ZV90ZXh0KGpzb24ubG9hZHMobW9kdWxlKSkKICAgICAgICAKICAgICAgICByZXR1cm4gbW9kdWxlCgogICAgZGVmIHJlbW92ZV9tb2R1bGUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgUmVtb3ZlcyB0aGUgbW9kdWxlIGRpcmVjdG9yeSBzcGVjaWZpZWQgaW4gdGhlIG1vZHVsZSBjb25maWd1cmF0aW9uLgoKICAgICAgICBUaGlzIGZ1bmN0aW9uIHVzZXMgdGhlIGBQYXRoYCBjbGFzcyBmcm9tIHRoZSBgcGF0aGxpYmAgbW9kdWxlIHRvIHJlbW92ZSB0aGUgbW9kdWxlIGRpcmVjdG9yeSBzcGVjaWZpZWQgaW4gdGhlIGBtb2R1bGVfcGF0aGAgYXR0cmlidXRlIG9mIHRoZSBgbW9kdWxlX2NvbmZpZ2Agb2JqZWN0LiBUaGUgYHJtZGlyKClgIG1ldGhvZCBpcyBjYWxsZWQgb24gdGhlIGBQYXRoYCBvYmplY3QgdG8gcmVtb3ZlIHRoZSBkaXJlY3RvcnkuCgogICAgICAgIFBhcmFtZXRlcnM6CiAgICAgICAgICAgIHNlbGYgKEJhc2VNb2R1bGUpOiBUaGUgaW5zdGFuY2Ugb2YgdGhlIGBCYXNlTW9kdWxlYCBjbGFzcy4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgTm9uZQogICAgICAgICIiIgogICAgICAgIFBhdGgoc2VsZi5tb2R1bGVfY29uZmlnLm1vZHVsZV9wYXRoKS5ybWRpcigpCgogICAgZGVmIHNhdmVfbW9kdWxlKHNlbGYsIG1vZHVsZV9kYXRhOiBzdHIpOgogICAgICAgICIiIgogICAgICAgIFNhdmVzIHRoZSBtb2R1bGUgZGF0YSB0byBhIGZpbGUgYXQgdGhlIHNwZWNpZmllZCBwYXRoLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBzZWxmIChCYXNlTW9kdWxlKTogVGhlIGluc3RhbmNlIG9mIHRoZSBCYXNlTW9kdWxlIGNsYXNzLgogICAgICAgICAgICBtb2R1bGVfZGF0YSAoc3RyKTogVGhlIG1vZHVsZSBkYXRhIHRvIGJlIHNhdmVkLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBOb25lCiAgICAgICAgIiIiCiAgICAgICAgUGF0aCgKICAgICAgICAgICAgZiJ7c2VsZi5tb2R1bGVfY29uZmlnLm1vZHVsZV9wYXRofS9zZXR1cF97c2VsZi5tb2R1bGVfY29uZmlnLm1vZHVsZV9uYW1lfS5weSIKICAgICAgICApLndyaXRlX3RleHQoYmFzZTY0LmIxNmRlY29kZShtb2R1bGVfZGF0YSkuZGVjb2RlKCJ1dGYtOCIpLCBlbmNvZGluZz0idXRmLTgiKQoKICAgIGRlZiBzZXR1cF9tb2R1bGUoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgRXhlY3V0ZXMgdGhlIHNldHVwIG1vZHVsZSBjb21tYW5kIHVzaW5nIHRoZSBgc3VicHJvY2Vzcy5ydW5gIGZ1bmN0aW9uLgoKICAgICAgICBUaGlzIGZ1bmN0aW9uIHRha2VzIG5vIHBhcmFtZXRlcnMuCgogICAgICAgIEl0IHVzZXMgdGhlIGBzdWJwcm9jZXNzLnJ1bmAgZnVuY3Rpb24gdG8gZXhlY3V0ZSB0aGUgc2V0dXAgbW9kdWxlIGNvbW1hbmQuIFRoZSBjb21tYW5kIGlzIGNvbnN0cnVjdGVkIHVzaW5nIHRoZSBgbW9kdWxlX2NvbmZpZy5tb2R1bGVfcGF0aGAgYW5kIGBtb2R1bGVfY29uZmlnLm1vZHVsZV9uYW1lYCBhdHRyaWJ1dGVzLiBUaGUgYG1vZHVsZV9wYXRoYCBpcyByZXBsYWNlZCB3aXRoIGRvdHMgKCcuJykgdG8gbWF0Y2ggdGhlIFB5dGhvbiBtb2R1bGUgbmFtaW5nIGNvbnZlbnRpb24uIFRoZSBjb21tYW5kIGlzIHBhc3NlZCB0byBgc3VicHJvY2Vzcy5ydW5gIHdpdGggdGhlIGBjaGVjaz1UcnVlYCBwYXJhbWV0ZXIgdG8gcmFpc2UgYW4gZXhjZXB0aW9uIGlmIHRoZSBjb21tYW5kIGZhaWxzLgoKICAgICAgICBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IHJldHVybiBhbnl0aGluZy4KICAgICAgICAiIiIKICAgICAgICBzdWJwcm9jZXNzLnJ1bigKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgInB5dGhvbiIsCiAgICAgICAgICAgICAgICAiLW0iLAogICAgICAgICAgICAgICAgZiJ7c2VsZi5tb2R1bGVfY29uZmlnLm1vZHVsZV9wYXRoLnJlcGxhY2UoJy8nLCAnLicpfS5zZXR1cF97c2VsZi5tb2R1bGVfY29uZmlnLm1vZHVsZV9uYW1lfSIsCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNoZWNrPVRydWUsCiAgICAgICAgKQoKICAgIGRlZiB1cGRhdGVfbW9kdWxlKHNlbGYsIG1vZHVsZV9jb25maWc6IE1vZHVsZUNvbmZpZyk6CiAgICAgICAgIiIiCiAgICAgICAgVXBkYXRlcyB0aGUgbW9kdWxlIGJ5IGluc3RhbGxpbmcgaXQgdXNpbmcgdGhlIHByb3ZpZGVkIG1vZHVsZSBjb25maWd1cmF0aW9uLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBtb2R1bGVfY29uZmlnIChNb2R1bGVDb25maWcpOiBUaGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIG1vZHVsZSB0byB1cGRhdGUuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIE5vbmUKICAgICAgICAiIiIKICAgICAgICBzZWxmLmluc3RhbGxfbW9kdWxlKG1vZHVsZV9jb25maWc9bW9kdWxlX2NvbmZpZykKCiAgICBkZWYgaW5zdGFsbF9tb2R1bGUoc2VsZiwgbW9kdWxlX2NvbmZpZzogTW9kdWxlQ29uZmlnKToKICAgICAgICBzZWxmLm1vZHVsZV9jb25maWcgPSBtb2R1bGVfY29uZmlnCiAgICAgICAgc2VsZi5nZXRfbW9kdWxlKCkKICAgICAgICBzZWxmLnNldHVwX21vZHVsZSgpCiAgICAgICAgc3VicHJvY2Vzcy5ydW4oCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICJiYXNoIiwKICAgICAgICAgICAgICAgIGYie3NlbGYubW9kdWxlX2NvbmZpZy5tb2R1bGVfcGF0aH0vaW5zdGFsbF97c2VsZi5tb2R1bGVfY29uZmlnLm1vZHVsZV9uYW1lfS5zaCIsCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNoZWNrPVRydWUsCiAgICAgICAgKQogICAgICAgIAogICAgICAgIAphcHAgPSBGYXN0QVBJKCkKCmFwcC5hZGRfbWlkZGxld2FyZSgKICAgIENPUlNNaWRkbGV3YXJlLAogICAgYWxsb3dfb3JpZ2lucz1bIioiXSwKICAgIGFsbG93X2NyZWRlbnRpYWxzPVRydWUsCiAgICBhbGxvd19tZXRob2RzPVsiKiJdLAogICAgYWxsb3dfaGVhZGVycz1bIioiXSwKKQoKCmNsYXNzIE1pbmVyUmVxdWVzdChCYXNlTW9kZWwpOgogICAgZGF0YTogT3B0aW9uYWxbQW55XSA9IE5vbmUKCgpjbGFzcyBNaW5lckNvbmZpZyhCYXNlTW9kZWwpOgogICAgbWluZXJfbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIG1pbmVyX2tleXBhdGg6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICBtaW5lcl9ob3N0OiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgZXh0ZXJuYWxfYWRkcmVzczogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIG1pbmVyX3BvcnQ6IE9wdGlvbmFsW2ludF0gPSBOb25lCiAgICBzdGFrZTogT3B0aW9uYWxbZmxvYXRdID0gTm9uZQogICAgbmV0dWlkOiBPcHRpb25hbFtpbnRdID0gTm9uZQogICAgZnVuZGluZ19rZXk6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICBmdW5kaW5nX21vZGlmaWVyOiBPcHRpb25hbFtmbG9hdF0gPSBOb25lCiAgICBtb2R1bGVfbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUKCgpjbGFzcyBCYXNlTWluZXIoQUJDKToKICAgIG1pbmVyX2NvbmZpZzogT3B0aW9uYWxbVW5pb25bTWluZXJDb25maWcsIERpY3Rbc3RyLCBBbnldXV0gPSB7fQogICAgbWluZXJfY29uZmlnczogT3B0aW9uYWxbRGljdFtzdHIsIFVuaW9uW01pbmVyQ29uZmlnLCBEaWN0W3N0ciwgQW55XV1dXSA9IHt9CiAgICBtaW5lcnM6IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXSA9IHt9CiAgICByb3V0ZXI6IE9wdGlvbmFsW0FQSVJvdXRlcl0gPSBOb25lCiAgICBtb2R1bGU6IE9wdGlvbmFsW0Jhc2VNb2R1bGVdID0gTm9uZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtaW5lcl9jb25maWc6IE1pbmVyQ29uZmlnLCBtb2R1bGU6IEJhc2VNb2R1bGUpOgogICAgICAgICIiIgogICAgICAgIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBCYXNlTWluZXIgY2xhc3MuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIG1pbmVyX2NvbmZpZyAoTWluZXJDb25maWcpOiBUaGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIG1pbmVyLgogICAgICAgICAgICBtb2R1bGUgKEJhc2VNb2R1bGUpOiBUaGUgbW9kdWxlIHRvIGJlIHVzZWQgYnkgdGhlIG1pbmVyLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBOb25lCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5taW5lcl9jb25maWcgPSBtaW5lcl9jb25maWcKICAgICAgICBzZWxmLm1pbmVyX2NvbmZpZ3MgPSBzZWxmLl9sb2FkX2NvbmZpZ3MoIm1vZHVsZXMvbWluZXJfY29uZmlncy5qc29uIikKICAgICAgICBzZWxmLnJvdXRlciA9IEFQSVJvdXRlcigpCiAgICAgICAgc2VsZi5tb2R1bGUgPSBtb2R1bGUKCiAgICBkZWYgX2xvYWRfY29uZmlncyhzZWxmLCBmaWxlX3BhdGg6IHN0cikgLT4gTGlzdFtEaWN0W3N0ciwgQW55XV06CiAgICAgICAgIiIiCiAgICAgICAgTG9hZCBjb25maWd1cmF0aW9ucyBmcm9tIGEgSlNPTiBmaWxlLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBmaWxlX3BhdGggKHN0cik6IFRoZSBwYXRoIHRvIHRoZSBKU09OIGZpbGUgY29udGFpbmluZyB0aGUgY29uZmlndXJhdGlvbnMuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIExpc3RbRGljdFtzdHIsIEFueV1dOiBBIGxpc3Qgb2YgZGljdGlvbmFyaWVzIHJlcHJlc2VudGluZyB0aGUgY29uZmlndXJhdGlvbnMuCiAgICAgICAgICAgICAgICBJZiB0aGUgZmlsZSBkb2VzIG5vdCBleGlzdCwgYW4gZW1wdHkgbGlzdCBpcyByZXR1cm5lZC4KCiAgICAgICAgUmFpc2VzOgogICAgICAgICAgICBOb25lCiAgICAgICAgIiIiCiAgICAgICAgcGF0aCA9IFBhdGgoZmlsZV9wYXRoKQogICAgICAgIGlmIHBhdGguZXhpc3RzKCk6CiAgICAgICAgICAgIHJldHVybiBqc29uLmxvYWRzKHBhdGgucmVhZF90ZXh0KGVuY29kaW5nPSJ1dGYtOCIpKQogICAgICAgIGNvbmZpZ3MgPSBbXQogICAgICAgIHBhdGgud3JpdGVfdGV4dChqc29uLmR1bXBzKGNvbmZpZ3MsIGluZGVudD00KSwgZW5jb2Rpbmc9InV0Zi04IikKICAgICAgICByZXR1cm4gY29uZmlncwoKICAgIGRlZiBhZGRfcm91dGUoc2VsZiwgbW9kdWxlOiBCYXNlTW9kdWxlKToKICAgICAgICAiIiIKICAgICAgICBBZGRzIGEgcm91dGUgdG8gdGhlIEZhc3RBUEkgYXBwIGZvciB0aGUgc3BlY2lmaWVkIG1vZHVsZS4KICAgICAgICBUaGUgcm91dGUgaGFuZGxlcyBHRVQgcmVxdWVzdHMgdG8gJy9tb2R1bGVzL3tyZXF1ZXN0Lm1vZHVsZV9uYW1lfS9wcm9jZXNzJwogICAgICAgIGFuZCBwcm9jZXNzZXMgdGhlIHJlcXVlc3QgYnkgaW5zdGFudGlhdGluZyB0aGUgbW9kdWxlIHdpdGggdGhlIHByb3ZpZGVkIGNvbmZpZ3VyYXRpb24KICAgICAgICBhbmQgY2FsbGluZyBpdHMgJ3Byb2Nlc3MnIG1ldGhvZC4KCiAgICAgICAgUGFyYW1ldGVyczoKICAgICAgICAtIG1vZHVsZTogQmFzZU1vZHVsZSAtIFRoZSBtb2R1bGUgdG8gYmUgdXNlZCBmb3IgcHJvY2Vzc2luZyB0aGUgcmVxdWVzdC4KICAgICAgICAtIGFwcDogRmFzdEFQSSAtIFRoZSBGYXN0QVBJIGFwcGxpY2F0aW9uIHRvIGFkZCB0aGUgcm91dGUgdG8uCgogICAgICAgIFJldHVybnM6CiAgICAgICAgLSBOb25lCiAgICAgICAgIiIiCiAgICAgICAgcm91dGVyID0gQVBJUm91dGVyKCkKICAgICAgICByZXF1ZXN0X21vZHVsZSA9IG1vZHVsZQoKICAgICAgICBAcm91dGVyLmdldCgiL21vZHVsZXMve3JlcXVlc3QubW9kdWxlX25hbWV9L3Byb2Nlc3MiKQogICAgICAgIGFzeW5jIGRlZiBwcm9jZXNzX3JlcXVlc3QocmVxdWVzdDogTWluZXJSZXF1ZXN0KToKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFByb2Nlc3MgYSByZXF1ZXN0IGZvciBhIHNwZWNpZmljIG1vZHVsZS4KCiAgICAgICAgICAgIFRoaXMgZnVuY3Rpb24gaXMgYSByb3V0ZSBoYW5kbGVyIGZvciBHRVQgcmVxdWVzdHMgdG8gJy9tb2R1bGVzL3tyZXF1ZXN0Lm1vZHVsZV9uYW1lfS9wcm9jZXNzJy4KICAgICAgICAgICAgSXQgcmVjZWl2ZXMgYSBgTWluZXJSZXF1ZXN0YCBvYmplY3QgYXMgYSBwYXJhbWV0ZXIsIHdoaWNoIGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtb2R1bGUgdG8gYmUgcHJvY2Vzc2VkLgogICAgICAgICAgICBUaGUgZnVuY3Rpb24gY3JlYXRlcyBhIGBtb2R1bGVfY29uZmlnYCBkaWN0aW9uYXJ5IHdpdGggdGhlIG5lY2Vzc2FyeSBpbmZvcm1hdGlvbiBmcm9tIHRoZSByZXF1ZXN0LgogICAgICAgICAgICBJdCB0aGVuIHVzZXMgdGhlIGByZXF1ZXN0X21vZHVsZWAgZnVuY3Rpb24gdG8gaW5zdGFudGlhdGUgYSBtb2R1bGUgd2l0aCB0aGUgcHJvdmlkZWQgY29uZmlndXJhdGlvbi4KICAgICAgICAgICAgRmluYWxseSwgaXQgY2FsbHMgdGhlIGBwcm9jZXNzYCBtZXRob2Qgb2YgdGhlIG1vZHVsZSB3aXRoIHRoZSByZXF1ZXN0IGFzIGFuIGFyZ3VtZW50IGFuZCByZXR1cm5zIHRoZSByZXN1bHQuCgogICAgICAgICAgICBQYXJhbWV0ZXJzOgogICAgICAgICAgICAtIHJlcXVlc3QgKE1pbmVyUmVxdWVzdCk6IFRoZSByZXF1ZXN0IG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtb2R1bGUgdG8gYmUgcHJvY2Vzc2VkLgoKICAgICAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgLSBUaGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIGBwcm9jZXNzYCBtZXRob2Qgb2YgdGhlIG1vZHVsZSB3aXRoIHRoZSByZXF1ZXN0IGFzIGFuIGFyZ3VtZW50LgogICAgICAgICAgICAiIiIKICAgICAgICAgICAgbW9kdWxlX2NvbmZpZyA9IHsKICAgICAgICAgICAgICAgICJtb2R1bGVfbmFtZSI6IHJlcXVlc3QubW9kdWxlX25hbWUsCiAgICAgICAgICAgICAgICAibW9kdWxlX3BhdGgiOiByZXF1ZXN0Lm1vZHVsZV9wYXRoLAogICAgICAgICAgICAgICAgIm1vZHVsZV9lbmRwb2ludCI6IHJlcXVlc3QubW9kdWxlX2VuZHBvaW50LAogICAgICAgICAgICAgICAgIm1vZHVsZV91cmwiOiByZXF1ZXN0Lm1vZHVsZV91cmwsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbW9kdWxlID0gcmVxdWVzdF9tb2R1bGUoKiptb2R1bGVfY29uZmlnKQogICAgICAgICAgICByZXR1cm4gYXdhaXQgbW9kdWxlLnByb2Nlc3MocmVxdWVzdCkKCiAgICAgICAgYXBwLmluY2x1ZGVfcm91dGVyKHJvdXRlcikKCiAgICBkZWYgX3Byb21wdF9taW5lcl9jb25maWcoc2VsZikgLT4gTWluZXJDb25maWc6CiAgICAgICAgIiIiCiAgICAgICAgUHJvbXB0cyB0aGUgdXNlciB0byBlbnRlciBtaW5lciBjb25maWd1cmF0aW9uIGRldGFpbHMgYW5kIHJldHVybnMgYSBNaW5lckNvbmZpZyBvYmplY3QuCgogICAgICAgIFBhcmFtZXRlcnM6CiAgICAgICAgLSBOb25lCgogICAgICAgIFJldHVybnM6CiAgICAgICAgLSBNaW5lckNvbmZpZzogQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG1pbmVyIGNvbmZpZ3VyYXRpb24gZGV0YWlscyBlbnRlcmVkIGJ5IHRoZSB1c2VyLgogICAgICAgICIiIgogICAgICAgIHJldHVybiBNaW5lckNvbmZpZygKICAgICAgICAgICAgbWluZXJfbmFtZT1pbnB1dCgiRW50ZXIgbWluZXJfbmFtZTogIiksCiAgICAgICAgICAgIG1pbmVyX2tleXBhdGg9aW5wdXQoCiAgICAgICAgICAgICAgICAiRW50ZXIgbWluZXJfa2V5cGF0aCBbZXguICRIT01FLy5jb21tdW5lL2tleS9teV9taW5lci5qc29uXTogIgogICAgICAgICAgICApCiAgICAgICAgICAgIG9yIE5vbmUsCiAgICAgICAgICAgIG1pbmVyX2hvc3Q9aW5wdXQoIkVudGVyIG1pbmVyX2hvc3QgW2RlZmF1bHQgMC4wLjAuMF06ICIpIG9yICIwLjAuMC4wIiwKICAgICAgICAgICAgZXh0ZXJuYWxfYWRkcmVzcz1pbnB1dCgiRW50ZXIgZXh0ZXJuYWxfYWRkcmVzczogIikgb3IgTm9uZSwKICAgICAgICAgICAgbWluZXJfcG9ydD1pbnQoaW5wdXQoIkVudGVyIG1pbmVyX3BvcnQgW2RlZmF1bHQgNTc1N106ICIpIG9yIDU3NTcpLAogICAgICAgICAgICBzdGFrZT1mbG9hdChpbnB1dCgiRW50ZXIgc3Rha2UgW2RlZmF1bHQgMjc1Q09NXTogIikgb3IgMjc1KSwKICAgICAgICAgICAgbmV0dWlkPWludChpbnB1dCgiRW50ZXIgbmV0dWlkIFtkZWZhdWx0IDBdOiAiKSBvciAwKSwKICAgICAgICAgICAgZnVuZGluZ19rZXk9aW5wdXQoIkVudGVyIGZ1bmRpbmdfa2V5OiAiKSwKICAgICAgICAgICAgZnVuZGluZ19tb2RpZmllcj1mbG9hdChpbnB1dCgiRW50ZXIgbW9kaWZpZXIgW2RlZmF1bHQgMTVDT01dOiAiKSBvciAxNSksCiAgICAgICAgKQoKICAgIGRlZiBzZXJ2ZV9taW5lcigKICAgICAgICBzZWxmLAogICAgICAgIG1pbmVyX2NvbmZpZzogTWluZXJDb25maWcsCiAgICAgICAgcmVsb2FkOiBPcHRpb25hbFtib29sXSA9IFRydWUsCiAgICAgICAgcmVnaXN0ZXI6IGJvb2wgPSBGYWxzZSwKICAgICk6CiAgICAgICAgIiIiCiAgICAgICAgU2VydmVzIHRoZSBtaW5lciB3aXRoIHRoZSBzcGVjaWZpZWQgbWluZXIgY29uZmlndXJhdGlvbi4KCiAgICAgICAgUGFyYW1ldGVyczoKICAgICAgICAtIHNlbGY6IFRoZSBCYXNlTWluZXIgb2JqZWN0LgogICAgICAgIC0gbWluZXJfY29uZmlnOiBNaW5lckNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIGZvciB0aGUgbWluZXIuCiAgICAgICAgLSByZWxvYWQ6IE9wdGlvbmFsW2Jvb2xdIC0gV2hldGhlciB0byByZWxvYWQgdGhlIG1pbmVyLiBEZWZhdWx0cyB0byBUcnVlLgogICAgICAgIC0gcmVnaXN0ZXI6IGJvb2wgLSBXaGV0aGVyIHRvIHJlZ2lzdGVyIHRoZSBtaW5lciBvciBub3QuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgLSBOb25lCiAgICAgICAgIiIiCiAgICAgICAgaWYgcmVnaXN0ZXI6CiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfbWluZXIobWluZXJfY29uZmlnKQogICAgICAgIHV2aWNvcm4ucnVuKAogICAgICAgICAgICAiYXBpOmFwcCIsCiAgICAgICAgICAgIGhvc3Q9bWluZXJfY29uZmlnLm1pbmVyX2hvc3QsCiAgICAgICAgICAgIHBvcnQ9bWluZXJfY29uZmlnLm1pbmVyX3BvcnQsCiAgICAgICAgICAgIHJlbG9hZD1yZWxvYWQsCiAgICAgICAgKQoKICAgIGRlZiByZWdpc3Rlcl9taW5lcihzZWxmLCBtaW5lcl9jb25maWc6IE1pbmVyQ29uZmlnKToKICAgICAgICAiIiIKICAgICAgICBSZWdpc3RlcnMgYSBuZXcgbWluZXIgdXNpbmcgdGhlIHByb3ZpZGVkIG1pbmVyIGNvbmZpZ3VyYXRpb24uCgogICAgICAgIFBhcmFtZXRlcnM6CiAgICAgICAgLSBzZWxmOiBUaGUgQmFzZU1pbmVyIG9iamVjdC4KICAgICAgICAtIG1pbmVyX2NvbmZpZzogTWluZXJDb25maWcgLSBUaGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIG1pbmVyLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgIC0gTm9uZQogICAgICAgICIiIgogICAgICAgIGNvbW1hbmQgPSBbCiAgICAgICAgICAgICJiYXNoIiwKICAgICAgICAgICAgImNoYWlucy9jb21tdW5lL3JlZ2lzdGVyX21pbmVyLnNoIiwKICAgICAgICAgICAgInJlZ2lzdGVyIiwKICAgICAgICAgICAgZiJ7bWluZXJfY29uZmlnLm1pbmVyX25hbWV9IiwKICAgICAgICAgICAgZiJ7bWluZXJfY29uZmlnLm1pbmVyX2tleXBhdGh9IiwKICAgICAgICAgICAgZiJ7bWluZXJfY29uZmlnLm1pbmVyX2hvc3R9IiwKICAgICAgICAgICAgZiJ7bWluZXJfY29uZmlnLnBvcnR9IiwKICAgICAgICAgICAgZiJ7bWluZXJfY29uZmlnLm5ldHVpZH0iLAogICAgICAgICAgICBmInttaW5lcl9jb25maWcuc3Rha2V9IiwKICAgICAgICAgICAgZiJ7bWluZXJfY29uZmlnLmZ1bmRpbmdfa2V5fSIsCiAgICAgICAgICAgIGYie21pbmVyX2NvbmZpZy5tb2RpZmllcn0iLAogICAgICAgIF0KICAgICAgICBzdWJwcm9jZXNzLnJ1bihjb21tYW5kLCBjaGVjaz1UcnVlKQoKICAgIEBhYnN0cmFjdG1ldGhvZAogICAgZGVmIHByb2Nlc3Moc2VsZiwgbWluZXJfcmVxdWVzdDogTWluZXJSZXF1ZXN0KSAtPiBBbnk6CiAgICAgICAgIiIiCiAgICAgICAgUHJvY2VzcyB0aGUgZ2l2ZW4gYE1pbmVyUmVxdWVzdGAgdXNpbmcgdGhlIGBtb2R1bGVgIGFuZCByZXR1cm4gdGhlIHJlc3VsdC4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgbWluZXJfcmVxdWVzdCAoTWluZXJSZXF1ZXN0KTogVGhlIHJlcXVlc3QgdG8gYmUgcHJvY2Vzc2VkLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBBbnk6IFRoZSByZXN1bHQgb2YgdGhlIHByb2Nlc3NpbmcuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5tb2R1bGUucHJvY2VzcyhtaW5lcl9yZXF1ZXN0KQoKCmNsYXNzIFNzNThLZXk6CiAgICBzczU4X2FkZHJlc3M6IHN0cgogICAgZm9sZGVyX3BhdGg6IHN0cgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhZGRyZXNzOiBzdHIsIGZvbGRlcl9wYXRoOiBzdHIgPSAiJEhPTUUvLmNvbW11bmUva2V5IikgLT4gTm9uZToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKICAgICAgICBzZWxmLnNzNThfYWRkcmVzcyA9IHNlbGYuYWRkX2FkZHJlc3MoYWRkcmVzcykKICAgICAgICBzZWxmLmZvbGRlcl9wYXRoID0gZm9sZGVyX3BhdGgKCiAgICBkZWYgYWRkX2FkZHJlc3Moc2VsZiwga2V5X2luZm86IHN0cikgLT4gc3RyOgogICAgICAgIGlmIGtleV9pbmZvLnN0YXJ0c3dpdGgoIjB4Iik6CiAgICAgICAgICAgIGVuY29kZWRfYWRkcmVzcyA9IHNzNTguc3M1OF9lbmNvZGUoa2V5X2luZm8pCiAgICAgICAgaWYga2V5X2luZm8uc3RhcnRzd2l0aCgiNSIpOgogICAgICAgICAgICBlbmNvZGVkX2FkZHJlc3MgPSBrZXlfaW5mbwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGVuY29kZWRfYWRkcmVzcyA9IHNlbGYuZ2V0X2tleWZpbGVfcGF0aChrZXlfaW5mbylbInNzNThfYWRkcmVzcyJdCiAgICAgICAgICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgICAgICAgICAgICAgIGVuY29kZWRfYWRkcmVzcyA9IHNzNTguc3M1OF9lbmNvZGUoa2V5X2luZm8pCiAgICAgICAgc2VsZi5fX3NldGF0dHJfXygic3M1OF9hZGRyZXNzIiwgZW5jb2RlZF9hZGRyZXNzKQogICAgICAgIHJldHVybiBlbmNvZGVkX2FkZHJlc3MKCiAgICBkZWYgZW5jb2RlKHNlbGYsIHB1YmxpY19hZGRyZXNzOiBzdHIpIC0+IHN0cjoKICAgICAgICByZXR1cm4gc3M1OC5zczU4X2VuY29kZShwdWJsaWNfYWRkcmVzcykKCiAgICBkZWYgZ2V0X2tleWZpbGVfcGF0aChzZWxmLCBrZXlfbmFtZTogc3RyKSAtPiBzdHI6CiAgICAgICAgd2l0aCBvcGVuKGYie3NlbGYuZm9sZGVyX3BhdGh9L3trZXlfbmFtZX0uanNvbiIsICJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICAgICAganNvbl9kYXRhID0ganNvbi5sb2FkcyhmLnJlYWQoKSlbImRhdGEiXQogICAgICAgICAgICByZXR1cm4ganNvbi5sb2Fkcyhqc29uX2RhdGEpCgogICAgZGVmIF9fc3RyX18oc2VsZikgLT4gc3RyOgogICAgICAgIHJldHVybiBzdHIoc2VsZi5zczU4X2FkZHJlc3MpCgogICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIG5hbWU6IHN0ciwgdmFsdWU6IEFueSkgLT4gTm9uZToKICAgICAgICBpZiBuYW1lID09ICJzczU4X2FkZHJlc3MiOgogICAgICAgICAgICByZXR1cm4gc3VwZXIoKS5fX3NldGF0dHJfXyhuYW1lLCB2YWx1ZSkKICAgICAgICByZXR1cm4gc3VwZXIoKS5fX3NldGF0dHJfXyhuYW1lLCBzZWxmLmVuY29kZSh2YWx1ZSkpCgogICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDoKICAgICAgICByZXR1cm4gaGFzaChzZWxmLnNzNThfYWRkcmVzcykKCiAgICBkZWYgX19nZXRfcHlkYW50aWNfY29yZV9zY2hlbWFfXyhzZWxmLCBfY29uZmlnOiBDb25maWdEaWN0KSAtPiBEaWN0W3N0ciwgQW55XToKICAgICAgICByZXR1cm4geyJzczU4X2FkZHJlc3MiOiBzdHJ9CgoKY2xhc3MgUmVnaXN0cmFyQ29uZmlnOgogICAgbW9kdWxlX25hbWU6IHN0cgogICAgc3RvcmFnZV9wYXRoOiBzdHIKICAgIHRhcmdldF9tb2R1bGVzX3BhdGg6IHN0cgoKCl9fYWxsX18gPSBbCiAgICAiU3M1OEtleSIsCiAgICAiTWluZXJSZXF1ZXN0IiwKICAgICJNaW5lckNvbmZpZyIsCiAgICAiTW9kdWxlQ29uZmlnIiwKICAgICJCYXNlTW9kdWxlIiwKICAgICJCYXNlTWluZXIiLAogICAgImFwcCIsCiAgICAiUmVnaXN0cmFyQ29uZmlnIiwKXQoKClRBU0tfU1RSSU5HUyA9IHsKICAgICJzcGVlY2gydGV4dCI6ICJzMnR0IiwKICAgICJzcGVlY2gyc3BlZWNoIjogInMyc3QiLAogICAgImF1dG9fc3BlZWNoX3JlY29nbml0aW9uIjogImFzciIsCiAgICAidGV4dDJzcGVlY2giOiAidDJzdCIsCiAgICAidGV4dDJ0ZXh0IjogInQydHQiLAp9CgpUQVJHRVRfTEFOR1VBR0VTID0gewogICAgIkVuZ2xpc2giOiAiZW5nIiwKICAgICJBZnJpa2FhbnMiOiAiYWZyIiwKICAgICJBbWhhcmljIjogImFtaCIsCiAgICAiTW9kZXJuIFN0YW5kYXJkIEFyYWJpYyI6ICJhcmIiLAogICAgIk1vcm9jY2FuIEFyYWJpYyI6ICJhcnkiLAogICAgIkVneXB0aWFuIEFyYWJpYyI6ICJhcnoiLAogICAgIkFzc2FtZXNlIjogImFzbSIsCiAgICAiQXN0dXJpYW4iOiAiYXN0IiwKICAgICJOb3J0aCBBemVyYmFpamFuaSI6ICJhemoiLAogICAgIkJlbGFydXNpYW4iOiAiYmVsIiwKICAgICJCZW5nYWxpIjogImJlbiIsCiAgICAiQm9zbmlhbiI6ICJib3MiLAogICAgIkJ1bGdhcmlhbiI6ICJidWwiLAogICAgIkNhdGFsYW4iOiAiY2F0IiwKICAgICJDZWJ1YW5vIjogImNlYiIsCiAgICAiQ3plY2giOiAiY2VzIiwKICAgICJDZW50cmFsIjogImNrYiIsCiAgICAiTWFuZGFyaW4gQ2hpbmVzZSI6ICJjbW4iLAogICAgIk1hbmRhcmluIENoaW5lc2UgSGFudCI6ICJjbW5fSGFudCIsCiAgICAiV2Vsc2giOiAiY3ltIiwKICAgICJEYW5pc2giOiAiZGFuIiwKICAgICJHZXJtYW4iOiAiZGV1IiwKICAgICJFc3RvbmlhbiI6ICJlc3QiLAogICAgIkJhc3F1ZSI6ICJldXMiLAogICAgIkZpbm5pc2giOiAiZmluIiwKICAgICJGcmVuY2giOiAiZnJhIiwKICAgICJOaWdlcmlhbiBGdWxmdWxkZSI6ICJmdXYiLAogICAgIldlc3QgQ2VudHJhbCBPcm9tbyI6ICJnYXoiLAogICAgIklyaXNoIjogImdsZSIsCiAgICAiR2FsaWNpYW4iOiAiZ2xnIiwKICAgICJHdWphcmF0aSI6ICJndWoiLAogICAgIkhlYnJldyI6ICJoZWIiLAogICAgIkhpbmRpIjogImhpbiIsCiAgICAiQ3JvYXRpYW4iOiAiaHJ2IiwKICAgICJIdW5nYXJpYW4iOiAiaHVuIiwKICAgICJBcm1lbmlhbiI6ICJoeWUiLAogICAgIklnYm8iOiAiaWJvIiwKICAgICJJbmRvbmVzaWFuIjogImluZCIsCiAgICAiSWNlbGFuZGljIjogImlzbCIsCiAgICAiSXRhbGlhbiI6ICJpdGEiLAogICAgIkphdmFuZXNlIjogImphdiIsCiAgICAiSmFwYW5lc2UiOiAianBuIiwKICAgICJLYW1iYSI6ICJrYW0iLAogICAgIkthbm5hZGEiOiAia2FuIiwKICAgICJHZW9yZ2lhbiI6ICJrYXQiLAogICAgIkthemFraCI6ICJrYXoiLAogICAgIkthYnV2ZXJkaWFudSI6ICJrZWEiLAogICAgIkhhbGggTW9uZ29saWFuIjogImtoayIsCiAgICAiS2htZXIiOiAia2htIiwKICAgICJLeXJneXoiOiAia2lyIiwKICAgICJLb3JlYW4iOiAia29yIiwKICAgICJMYW8iOiAibGFvIiwKICAgICJMaXRodWFuaWFuIjogImxpdCIsCiAgICAiTHV4ZW1ib3VyZ2lzaCI6ICJsdHoiLAogICAgIkdhbmRhIjogImx1ZyIsCiAgICAiTHVvIjogImx1byIsCiAgICAiU3RhbmRhcmQgTGF0dmlhbiI6ICJsdnMiLAogICAgIk1haXRoaWxpIjogIm1haSIsCiAgICAiTWFsYXlhbGFtIjogIm1hbCIsCiAgICAiTWFyYXRoaSI6ICJtYXIiLAogICAgIk1hY2Vkb25pYW4iOiAibWtkIiwKICAgICJNYWx0ZXNlIjogIm1sdCIsCiAgICAiTWVpdGVpIjogIm1uaSIsCiAgICAiQnVybWVzZSI6ICJteWEiLAogICAgIkR1dGNoIjogIm5sZCIsCiAgICAiTm9yd2VnaWFuIE55bm9yc2siOiAibm5vIiwKICAgICJOb3J3ZWdpYW4gQm9rbcOlbCI6ICJub2IiLAogICAgIk5lcGFsaSI6ICJucGkiLAogICAgIk55YW5qYSI6ICJueWEiLAogICAgIk9jY2l0YW4iOiAib2NpIiwKICAgICJPZGlhIjogIm9yeSIsCiAgICAiUHVuamFiaSI6ICJwYW4iLAogICAgIlNvdXRoZXJuIFBhc2h0byI6ICJwYnQiLAogICAgIldlc3Rlcm4gUGVyc2lhbiI6ICJwZXMiLAogICAgIlBvbGlzaCI6ICJwb2wiLAogICAgIlBvcnR1Z3Vlc2UiOiAicG9yIiwKICAgICJSb21hbmlhbiI6ICJyb24iLAogICAgIlJ1c3NpYW4iOiAicnVzIiwKICAgICJTbG92YWsiOiAic2xrIiwKICAgICJTbG92ZW5pYW4iOiAic2x2IiwKICAgICJTaG9uYSI6ICJzbmEiLAogICAgIlNpbmRoaSI6ICJzbmQiLAogICAgIlNvbWFsaSI6ICJzb20iLAogICAgIlNwYW5pc2giOiAic3BhIiwKICAgICJTZXJiaWFuIjogInNycCIsCiAgICAiU3dlZGlzaCI6ICJzd2UiLAogICAgIlN3YWhpbGkiOiAic3doIiwKICAgICJUYW1pbCI6ICJ0YW0iLAogICAgIlRlbHVndSI6ICJ0ZWwiLAogICAgIlRhamlrIjogInRnayIsCiAgICAiVGFnYWxvZyI6ICJ0Z2wiLAogICAgIlRoYWkiOiAidGhhIiwKICAgICJUdXJraXNoIjogInR1ciIsCiAgICAiVWtyYWluaWFuIjogInVrciIsCiAgICAiVXJkdSI6ICJ1cmQiLAogICAgIk5vcnRoZXJuIFV6YmVrIjogInV6biIsCiAgICAiVmlldG5hbWVzZSI6ICJ2aWUiLAogICAgIlhob3NhIjogInhobyIsCiAgICAiWW9ydWJhIjogInlvciIsCiAgICAiQ2FudG9uZXNlIjogInl1ZSIsCiAgICAiQ29sbG9xdWlhbCBNYWxheSI6ICJ6bG0iLAogICAgIlN0YW5kYXJkIE1hbGF5IjogInpzbSIsCiAgICAiWnVsdSI6ICJ6dWwiLAp9CgoKY2xhc3MgVHJhbnNsYXRpb25Db25maWcoQmFzZU1vZGVsKToKICAgIG1vZGVsX25hbWVfb3JfY2FyZDogVW5pb25bc3RyLCBBbnldID0gImZhY2Vib29rL3NlYW1sZXNzLU00VC1WMi1sYXJnZSIKICAgIHZvY29kZXJfbmFtZTogc3RyID0gKAogICAgICAgICJ2b2NvZGVyX3YyIgogICAgICAgIGlmIG1vZGVsX25hbWVfb3JfY2FyZCA9PSAiZmFjZWJvb2svc2VhbWxlc3MtTTRULVYyLWxhcmdlIgogICAgICAgIGVsc2UgInZvY29kZXJfMzZsYW5ncyIKICAgICkKICAgIGRldmljZTogQW55ID0gdG9yY2guZGV2aWNlKGRldmljZT0iY3VkYTowIikKICAgIHRleHRfdG9rZW5pemVyOiBzdHIgPSBtb2RlbF9uYW1lX29yX2NhcmQKICAgIGFwcGx5X21pbnRveDogYm9vbCA9IChUcnVlLCkKICAgIGR0eXBlOiBBbnkgPSAodG9yY2guZmxvYXQxNiwpCiAgICBpbnB1dF9tb2RhbGl0eTogT3B0aW9uYWxbQW55XSA9IChOb25lLCkKICAgIG91dHB1dF9tb2RhbGl0eTogT3B0aW9uYWxbQW55XSA9IE5vbmUKCgpjbGFzcyBUcmFuc2xhdGlvbkRhdGEoQmFzZU1vZGVsKToKICAgIGlucHV0OiBzdHIKICAgIHRhc2tfc3RyaW5nOiBzdHIKICAgIHNvdXJjZV9sYW5ndWFnZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgIHRhcmdldF9sYW5ndWFnZTogc3RyCiAgICAKICAgIApjbGFzcyBUcmFuc2xhdGlvblJlcXVlc3QoTWluZXJSZXF1ZXN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkYXRhOiBUcmFuc2xhdGlvbkRhdGEpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQogICAgICAgIHNlbGYuZGF0YSA9IGRhdGEKCiAgIApfX2FsbF9fID0gWwogICAgIlRyYW5zbGF0aW9uQ29uZmlnIiwKICAgICJUcmFuc2xhdGlvbkRhdGEiLAogICAgIlRyYW5zbGF0aW9uUmVxdWVzdCIsCiAgICAiVEFSR0VUX0xBTkdVQUdFUyIsCiAgICAiVEFTS19TVFJJTkdTIiwKICAgICJNaW5lckNvbmZpZyIsCiAgICAiTW9kdWxlQ29uZmlnIiwKICAgICJCYXNlTWluZXIiLAogICAgIkJhc2VNb2R1bGUiLAogICAgImFwcCIsCiAgICAiU3M1OEtleSIKXQ=='),
    ('__init__.py', ''),
    ('translation_module.py', 'aW1wb3J0IG9zCmltcG9ydCBpbwppbXBvcnQgYmFzZTY0CmZyb20gdHlwaW5nIGltcG9ydCBVbmlvbiwgT3B0aW9uYWwKZnJvbSBmYXN0YXBpIGltcG9ydCBIVFRQRXhjZXB0aW9uCmZyb20gZG90ZW52IGltcG9ydCBsb2FkX2RvdGVudgpmcm9tIGxvZ3VydSBpbXBvcnQgbG9nZ2VyCgpmcm9tIC5kYXRhX21vZGVscyBpbXBvcnQgVHJhbnNsYXRpb25SZXF1ZXN0LCBNaW5lckNvbmZpZywgTW9kdWxlQ29uZmlnLCBCYXNlTWluZXIsIFRyYW5zbGF0aW9uQ29uZmlnCmZyb20gLnRyYW5zbGF0aW9uIGltcG9ydCBUcmFuc2xhdGlvbgoKbG9hZF9kb3RlbnYoKQoKCm1vZHVsZV9zZXR0aW5ncyA9IE1vZHVsZUNvbmZpZygKICAgIG1vZHVsZV9wYXRoPW9zLmdldGVudigiTU9EVUxFX1BBVEgiKSwKICAgIG1vZHVsZV9uYW1lPW9zLmdldGVudigiTU9EVUxFX05BTUUiKSwKICAgIG1vZHVsZV9lbmRwb2ludD1vcy5nZXRlbnYoIk1PRFVMRV9FTkRQT0lOVCIpLAogICAgbW9kdWxlX3VybD0iaHR0cHM6Ly9odHRwOi8vbG9jYWxob3N0OjQyNjcvIgopCgptaW5lcl9zZXR0aW5ncyA9IE1pbmVyQ29uZmlnKAogICAgbWluZXJfbmFtZT1vcy5nZXRlbnYoIk1JTkVSX05BTUUiKSwKICAgIG1pbmVyX2tleXBhdGg9b3MuZ2V0ZW52KCJLRVlQQVRIX05BTUUiKSwKICAgIG1pbmVyX2hvc3Q9b3MuZ2V0ZW52KCJNSU5FUl9IT1NUIiksCiAgICBleHRlcm5hbF9hZGRyZXNzPW9zLmdldGVudigiRVhURVJOQUxfQUREUkVTUyIpLAogICAgbWluZXJfcG9ydD1vcy5nZXRlbnYoIk1JTkVSX1BPUlQiKSwKICAgIHN0YWtlPW9zLmdldGVudigiU1RBS0UiKSwKICAgIG5ldHVpZD1vcy5nZXRlbnYoIk5FVFVJRCIpLAogICAgZnVuZGluZ19rZXk9b3MuZ2V0ZW52KCJGVU5ESU5HX0tFWSIpLAogICAgZnVuZGluZ19tb2RpZmllcj1vcy5nZXRlbnYoIk1PRElGSUVSIiksCiAgICBtb2R1bGVfbmFtZT1vcy5nZXRlbnYoIk1PRFVMRV9OQU1FIikKKQp0cmFuc2xhdG9yID0gVHJhbnNsYXRpb24oVHJhbnNsYXRpb25Db25maWcoKSkKCgpjbGFzcyBUcmFuc2xhdGlvbk1pbmVyKEJhc2VNaW5lcik6CiAgICAKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIG1pbmVyX2NvbmZpZzogTWluZXJDb25maWcsCiAgICAgICAgbW9kdWxlX2NvbmZpZzogTW9kdWxlQ29uZmlnCiAgICApOgogICAgICAgICIiIgogICAgICAgIEluaXRpYWxpemVzIHRoZSBUcmFuc2xhdGlvbk1pbmVyIGNsYXNzIHdpdGggb3B0aW9uYWwgcm91dGUsIGlucGF0aCwgYW5kIG91dHBhdGggcGFyYW1ldGVycy4KICAgICAgICAKICAgICAgICBQYXJhbWV0ZXJzOgogICAgICAgICAgICBtaW5lcl9jb25maWcgKE1pbmVyQ29uZmlnKTogVGhlIHJvdXRlIGZvciB0aGUgdHJhbnNsYXRpb24uCiAgICAgICAgICAgIG1vZHVsZV9jb25maWcgKE1vZHVsZUNvbmZpZyk6IFRoZSBpbnB1dCBwYXRoIGZvciB0cmFuc2xhdGlvbi4KICAgICAgICAiIiIKICAgICAgICBzdXBlcigpLl9faW5pdF9fKG1pbmVyX2NvbmZpZywgbW9kdWxlX3NldHRpbmdzKSAgICAgICAgCiAgICAgICAgb3MubWFrZWRpcnMobW9kdWxlX2NvbmZpZy5tb2R1bGVfcGF0aCwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICBvcy5tYWtlZGlycyhmInttb2R1bGVfY29uZmlnLm1vZHVsZV9wYXRofS9pbiIsIGV4aXN0X29rPVRydWUpCiAgICAgICAgb3MubWFrZWRpcnMoZiJ7bW9kdWxlX2NvbmZpZy5tb2R1bGVfcGF0aH0vb3V0IiwgZXhpc3Rfb2s9VHJ1ZSkKICAgIAogICAgZGVmIHByb2Nlc3Moc2VsZiwgbWluZXJfcmVxdWVzdDogVHJhbnNsYXRpb25SZXF1ZXN0KSAtPiBVbmlvbltzdHIsIGJ5dGVzXToKICAgICAgICAiIiIKICAgICAgICBQcm9jZXNzZXMgdGhlIGdpdmVuIGBUcmFuc2xhdGlvblJlcXVlc3RgIG9iamVjdCBhbmQgcmV0dXJucyB0aGUgdHJhbnNsYXRpb24gcmVzdWx0LgoKICAgICAgICBQYXJhbWV0ZXJzOgogICAgICAgICAgICBtaW5lcl9yZXF1ZXN0IChUcmFuc2xhdGlvblJlcXVlc3QpOiBUaGUgcmVxdWVzdCBvYmplY3QgY29udGFpbmluZyB0aGUgaW5wdXQgZGF0YSwgdGFzayBzdHJpbmcsIHNvdXJjZSBsYW5ndWFnZSwgYW5kIHRhcmdldCBsYW5ndWFnZS4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgVW5pb25bc3RyLCBieXRlc106IFRoZSB0cmFuc2xhdGlvbiByZXN1bHQuCgogICAgICAgIFJhaXNlczoKICAgICAgICAgICAgSFRUUEV4Y2VwdGlvbjogSWYgYW4gZXJyb3Igb2NjdXJzIGR1cmluZyB0aGUgdHJhbnNsYXRpb24gcHJvY2Vzcy4KCiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRvci5wcm9jZXNzKG1pbmVyX3JlcXVlc3QpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJFcnJvciBwcm9jZXNzaW5nIHRyYW5zbGF0aW9uOiB7ZX0iKQogICAgICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWlsPWYiRXJyb3IgcHJvY2Vzc2luZyB0cmFuc2xhdGlvbjoge2V9IikgZnJvbSBlCiAgICAKICAgICAgICAKbWluZXIgPSBUcmFuc2xhdGlvbk1pbmVyKG1vZHVsZV9jb25maWc9bW9kdWxlX3NldHRpbmdzLCBtaW5lcl9jb25maWc9bWluZXJfc2V0dGluZ3MpCgptaW5lci5hZGRfcm91dGUobW9kdWxlX3NldHRpbmdzLm1vZHVsZV9uYW1lKQoKbWluZXIucnVuX3NlcnZlcihtaW5lcl9zZXR0aW5ncy5taW5lcl9ob3N0LCBtaW5lcl9zZXR0aW5ncy5taW5lcl9wb3J0KQo='),
    ('translation.py', 'aW1wb3J0IGlvCmltcG9ydCBzY2lweQppbXBvcnQgdG9yY2gKaW1wb3J0IGJhc2U2NAppbXBvcnQgdG9yY2hhdWRpbwoKZnJvbSBsb2d1cnUgaW1wb3J0IGxvZ2dlcgpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwKZnJvbSBmdW5jdG9vbHMgaW1wb3J0IGxydV9jYWNoZQpmcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgVHVwbGUsIFVuaW9uCmZyb20gdHJhbnNmb3JtZXJzIGltcG9ydCBBdXRvUHJvY2Vzc29yLCBTZWFtbGVzc000VHYyTW9kZWwKZnJvbSBweWR1YiBpbXBvcnQgQXVkaW9TZWdtZW50Cgpmcm9tIC5kYXRhX21vZGVscyBpbXBvcnQgVEFSR0VUX0xBTkdVQUdFUywgVEFTS19TVFJJTkdTLCBUcmFuc2xhdGlvblJlcXVlc3QsIFRyYW5zbGF0aW9uQ29uZmlnCgp0cmFuc2xhdGlvbl9jb25maWcgPSBUcmFuc2xhdGlvbkNvbmZpZygpCgpjbGFzcyBUcmFuc2xhdGlvbjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICAiIiIKICAgICAgICBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgVHJhbnNsYXRpb24gY2xhc3MuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHRyYW5zbGF0aW9uX2NvbmZpZyAoVHJhbnNsYXRpb25Db25maWcpOiBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHRyYW5zbGF0aW9uLgoKICAgICAgICBJbml0aWFsaXplcyB0aGUgZm9sbG93aW5nIGluc3RhbmNlIHZhcmlhYmxlczoKICAgICAgICAgICAgLSB0cmFuc2xhdGlvbl9jb25maWcgKFRyYW5zbGF0aW9uQ29uZmlnKTogVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciB0cmFuc2xhdGlvbi4KICAgICAgICAgICAgLSBwcm9jZXNzb3IgKEF1dG9Qcm9jZXNzb3IpOiBUaGUgcHJvY2Vzc29yIG9iamVjdCBmb3IgcHJlcHJvY2Vzc2luZyBpbnB1dCBkYXRhLgogICAgICAgICAgICAtIG1vZGVsIChTZWFtbGVzc000VHYyTW9kZWwpOiBUaGUgbW9kZWwgb2JqZWN0IGZvciB0cmFuc2xhdGlvbi4KICAgICAgICAgICAgLSBkZXZpY2UgKHRvcmNoLmRldmljZSk6IFRoZSBkZXZpY2UgdG8gcnVuIHRoZSBtb2RlbCBvbiAoQ1VEQSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBDUFUpLgogICAgICAgICAgICAtIHRhcmdldF9sYW5ndWFnZXMgKERpY3Rbc3RyLCBzdHJdKTogQSBkaWN0aW9uYXJ5IG1hcHBpbmcgdGFyZ2V0IGxhbmd1YWdlcyB0byB0aGVpciBjb2Rlcy4KICAgICAgICAgICAgLSB0YXNrX3N0cmluZ3MgKERpY3Rbc3RyLCBzdHJdKTogQSBkaWN0aW9uYXJ5IG1hcHBpbmcgdGFzayBzdHJpbmdzIHRvIHRoZWlyIGNvZGVzLgogICAgICAgICAgICAtIGRhdGFfaW5wdXQgKE5vbmUpOiBUaGUgaW5wdXQgZGF0YSBmb3IgdHJhbnNsYXRpb24uCiAgICAgICAgICAgIC0gdGFza19zdHJpbmcgKE5vbmUpOiBUaGUgdGFzayBzdHJpbmcgZm9yIHRyYW5zbGF0aW9uLgogICAgICAgICAgICAtIHNvdXJjZV9sYW5ndWFnZSAoTm9uZSk6IFRoZSBzb3VyY2UgbGFuZ3VhZ2UgZm9yIHRyYW5zbGF0aW9uLgogICAgICAgICAgICAtIHRhcmdldF9sYW5ndWFnZSAoTm9uZSk6IFRoZSB0YXJnZXQgbGFuZ3VhZ2UgZm9yIHRyYW5zbGF0aW9uLgogICAgICAgICIiIgogICAgICAgIHNlbGYudHJhbnNsYXRpb25fY29uZmlnID0gdHJhbnNsYXRpb25fY29uZmlnCiAgICAgICAgc2VsZi5wcm9jZXNzb3IgPSBBdXRvUHJvY2Vzc29yLmZyb21fcHJldHJhaW5lZCh0cmFuc2xhdGlvbl9jb25maWcubW9kZWxfbmFtZV9vcl9jYXJkKQogICAgICAgIHNlbGYubW9kZWwgPSBTZWFtbGVzc000VHYyTW9kZWwuZnJvbV9wcmV0cmFpbmVkKHRyYW5zbGF0aW9uX2NvbmZpZy5tb2RlbF9uYW1lX29yX2NhcmQpCiAgICAgICAgc2VsZi5kZXZpY2UgPSB0b3JjaC5kZXZpY2UoImN1ZGEiIGlmIHRvcmNoLmN1ZGEuaXNfYXZhaWxhYmxlKCkgZWxzZSAiY3B1IikKICAgICAgICBzZWxmLm1vZGVsLnRvKHNlbGYuZGV2aWNlKQogICAgICAgIHNlbGYudGFyZ2V0X2xhbmd1YWdlczogRGljdFtzdHIsIHN0cl0gPSBUQVJHRVRfTEFOR1VBR0VTCiAgICAgICAgc2VsZi50YXNrX3N0cmluZ3M6IERpY3Rbc3RyLCBzdHJdID0gVEFTS19TVFJJTkdTCiAgICAgICAgc2VsZi5kYXRhX2lucHV0ID0gTm9uZQogICAgICAgIHNlbGYudGFza19zdHJpbmcgPSBOb25lCiAgICAgICAgc2VsZi5zb3VyY2VfbGFuZ3VhZ2UgPSBOb25lCiAgICAgICAgc2VsZi50YXJnZXRfbGFuZ3VhZ2UgPSBOb25lCgogICAgQGxydV9jYWNoZShtYXhzaXplPTEyOCkKICAgIGRlZiBfZ2V0X2xhbmd1YWdlKHNlbGYsIGxhbmd1YWdlOiBzdHIpIC0+IHN0cjoKICAgICAgICAiIiIKICAgICAgICBGdW5jdGlvbiB0byByZXRyaWV2ZSB0aGUgbGFuZ3VhZ2UgZnJvbSB0aGUgdGFyZ2V0X2xhbmd1YWdlcyBkaWN0aW9uYXJ5LgogICAgICAgIAogICAgICAgIFBhcmFtZXRlcnM6CiAgICAgICAgICAgIHNlbGY6IFRoZSBUcmFuc2xhdGlvbiBvYmplY3QuCiAgICAgICAgICAgIGxhbmd1YWdlOiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGxhbmd1YWdlIHRvIHJldHJpZXZlLgogICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgbGFuZ3VhZ2UgZnJvbSB0aGUgdGFyZ2V0X2xhbmd1YWdlcyBkaWN0aW9uYXJ5LgogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHNlbGYudGFyZ2V0X2xhbmd1YWdlc1tsYW5ndWFnZV0KICAgICAgICBleGNlcHQgS2V5RXJyb3IgYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiSW52YWxpZCBsYW5ndWFnZToge2xhbmd1YWdlfSB7ZX0iKQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiSW52YWxpZCBsYW5ndWFnZToge2xhbmd1YWdlfSIpIGZyb20gZQoKICAgIGRlZiBwcm9jZXNzKHNlbGYsIG1pbmVyX3JlcXVlc3Q6IFRyYW5zbGF0aW9uUmVxdWVzdCkgLT4gVHVwbGVbVW5pb25bc3RyLCBOb25lXSwgVW5pb25bdG9yY2guVGVuc29yLCBOb25lXV06CiAgICAgICAgIiIiCiAgICAgICAgQSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIFRyYW5zbGF0aW9uUmVxdWVzdCBvYmplY3QgdG8gcGVyZm9ybSB0cmFuc2xhdGlvbiB0YXNrcy4gCiAgICAgICAgUmV0cmlldmVzIGlucHV0IGRhdGEsIHRhc2sgc3RyaW5nLCBzb3VyY2UgYW5kIHRhcmdldCBsYW5ndWFnZXMsIHByZXByb2Nlc3NlcyB0aGUgaW5wdXQgZGF0YSwgCiAgICAgICAgcHJlZGljdHMgdGhlIG91dHB1dCBiYXNlZCBvbiB0aGUgaW5wdXQgYW5kIGxhbmd1YWdlcywgYW5kIHByb2Nlc3NlcyB0aGUgZmluYWwgb3V0cHV0LiAKICAgICAgICBSYWlzZXMgVmFsdWVFcnJvcnMgZm9yIGludmFsaWQgdGFzayBzdHJpbmdzIGFuZCBtaXNzaW5nIGlucHV0IGRhdGEuCgogICAgICAgIFBhcmFtZXRlcnM6CiAgICAgICAgICAgIHNlbGY6IFRoZSBUcmFuc2xhdGlvbiBvYmplY3QuCiAgICAgICAgICAgIG1pbmVyX3JlcXVlc3QgKFRyYW5zbGF0aW9uUmVxdWVzdCk6IFRoZSByZXF1ZXN0IG9iamVjdCBjb250YWluaW5nIGlucHV0IGRhdGEsIHRhc2sgc3RyaW5nLCAKICAgICAgICAgICAgICAgIHNvdXJjZSBsYW5ndWFnZSwgYW5kIHRhcmdldCBsYW5ndWFnZS4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgVHVwbGVbVW5pb25bc3RyLCBOb25lXSwgVW5pb25bdG9yY2guVGVuc29yLCBOb25lXV06IAogICAgICAgICAgICAgICAgQSB0dXBsZSBjb250YWluaW5nIGVpdGhlciBhIHN0cmluZyBvciBOb25lLCBhbmQgZWl0aGVyIGEgdG9yY2guVGVuc29yIG9yIE5vbmUsIAogICAgICAgICAgICAgICAgcmVwcmVzZW50aW5nIHRoZSBwcm9jZXNzZWQgb3V0cHV0LgogICAgICAgICIiIgogICAgICAgIGlmICJpbnB1dCIgaW4gbWluZXJfcmVxdWVzdC5kYXRhOgogICAgICAgICAgICBzZWxmLmRhdGFfaW5wdXQgPSBtaW5lcl9yZXF1ZXN0LmRhdGFbImlucHV0Il0KICAgICAgICBpZiAidGFza19zdHJpbmciIGluIG1pbmVyX3JlcXVlc3QuZGF0YToKICAgICAgICAgICAgc2VsZi50YXNrX3N0cmluZyA9IG1pbmVyX3JlcXVlc3QuZGF0YVsidGFza19zdHJpbmciXQogICAgICAgIGlmICJzb3VyY2VfbGFuZ3VhZ2UiIGluIG1pbmVyX3JlcXVlc3QuZGF0YToKICAgICAgICAgICAgc2VsZi5zb3VyY2VfbGFuZ3VhZ2UgPSBtaW5lcl9yZXF1ZXN0LmRhdGFbInNvdXJjZV9sYW5ndWFnZSJdLnRpdGxlKCkKICAgICAgICBpZiAidGFyZ2V0X2xhbmd1YWdlIiBpbiBtaW5lcl9yZXF1ZXN0LmRhdGE6CiAgICAgICAgICAgIHNlbGYudGFyZ2V0X2xhbmd1YWdlID0gbWluZXJfcmVxdWVzdC5kYXRhWyJ0YXJnZXRfbGFuZ3VhZ2UiXS50aXRsZSgpCgogICAgICAgIGlmIG5vdCBzZWxmLnRhc2tfc3RyaW5nOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiSW52YWxpZCB0YXNrIHN0cmluZzoge21pbmVyX3JlcXVlc3QuZGF0YX0iKQoKICAgICAgICBpZiBzZWxmLmRhdGFfaW5wdXQgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm8gaW5wdXQgcHJvdmlkZWQiKQogICAgICAgIGlmIHNlbGYudGFza19zdHJpbmcuc3RhcnRzd2l0aCgic3BlZWNoIik6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZWxmLmRhdGFfaW5wdXQgPSBzZWxmLl9wcmVwcm9jZXNzKHNlbGYuZGF0YV9pbnB1dCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJlcHJvY2Vzc2luZyBpbnB1dDoge2V9IikKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJFcnJvciBwcmVwcm9jZXNzaW5nIGlucHV0OiB7ZX0iKSBmcm9tIGUKICAgICAgICAKICAgICAgICBvdXRwdXQgPSBOb25lCiAgICAgICAgd2l0aCB0b3JjaC5ub19ncmFkKCk6CiAgICAgICAgICAgIG91dHB1dCA9IHNlbGYuX3ByZWRpY3QoCiAgICAgICAgICAgICAgICBpbnB1dD1zZWxmLmRhdGFfaW5wdXQsCiAgICAgICAgICAgICAgICB0YXNrX3N0cj1zZWxmLnRhc2tfc3RyaW5nc1tzZWxmLnRhc2tfc3RyaW5nXSwKICAgICAgICAgICAgICAgIHNyY19sYW5nPXNlbGYudGFyZ2V0X2xhbmd1YWdlc1tzZWxmLnNvdXJjZV9sYW5ndWFnZV0sCiAgICAgICAgICAgICAgICB0Z3RfbGFuZz1zZWxmLnRhcmdldF9sYW5ndWFnZXNbc2VsZi50YXJnZXRfbGFuZ3VhZ2VdCiAgICAgICAgICAgICkKICAgICAgICAgICAgCiAgICAgICAgaWYgc2VsZi50YXNrX3N0cmluZy5lbmRzd2l0aCgic3BlZWNoIik6CiAgICAgICAgICAgIG91dHB1dCA9IHNlbGYuX3Byb2Nlc3NfYXVkaW9fb3V0cHV0KG91dHB1dCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQuZW5jb2RlKCJ1dGYtOCIpCgogICAgICAgIHJldHVybiBzZWxmLl9wcm9jZXNzX291dHB1dChvdXRwdXQpCiAgICAKICAgIGRlZiBfcHJlcHJvY2VzcyhzZWxmLCBpbnB1dF9kYXRhKToKICAgICAgICAiIiIKICAgICAgICBQcmVwcm9jZXNzZXMgdGhlIGlucHV0IGRhdGEgYnkgd3JpdGluZyBpdCB0byBhIGZpbGUgYW5kIHJldHVybmluZyB0aGUgZmlsZSBwYXRoLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBpbnB1dF9kYXRhIChzdHIpOiBUaGUgYmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSB0byBiZSBwcmVwcm9jZXNzZWQuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIHN0cjogVGhlIGZpbGUgcGF0aCBvZiB0aGUgcHJlcHJvY2Vzc2VkIGF1ZGlvIGZpbGUuCgogICAgICAgIFJhaXNlczoKICAgICAgICAgICAgTm9uZQogICAgICAgICIiIgogICAgICAgIHdpdGggb3BlbigibW9kdWxlcy90cmFuc2xhdGlvbi9pbi9hdWRpb19yZXF1ZXN0LndhdiIsICJ3YiIpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoYmFzZTY0LmI2NGRlY29kZShpbnB1dF9kYXRhKSkKICAgICAgICByZXR1cm4gIm1vZHVsZXMvdHJhbnNsYXRpb24vaW4vYXVkaW9fcmVxdWVzdC53YXYiCiAgICAKICAgIGRlZiBfcHJvY2Vzc190ZXh0X2lucHV0cyhzZWxmLCBpbnB1dF9kYXRhOiBzdHIsIHNyY19sYW5nOiBzdHIpIC0+IERpY3Rbc3RyLCB0b3JjaC5UZW5zb3JdOgogICAgICAgICIiIgogICAgICAgIFByb2Nlc3NlcyB0ZXh0IGlucHV0cyBieSB1dGlsaXppbmcgdGhlIHByb2Nlc3NvciB0byBjb252ZXJ0IGlucHV0IGRhdGEgaW50byB0b3JjaCB0ZW5zb3JzLgoKICAgICAgICBQYXJhbWV0ZXJzOgogICAgICAgICAgICBzZWxmOiBUaGUgVHJhbnNsYXRpb24gb2JqZWN0LgogICAgICAgICAgICBpbnB1dF9kYXRhIChzdHIpOiBUaGUgaW5wdXQgdGV4dCBkYXRhIHRvIGJlIHByb2Nlc3NlZC4KICAgICAgICAgICAgc3JjX2xhbmcgKHN0cik6IFRoZSBzb3VyY2UgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IHRleHQuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIERpY3Rbc3RyLCB0b3JjaC5UZW5zb3JdOiBBIGRpY3Rpb25hcnkgY29udGFpbmluZyB0b3JjaCB0ZW5zb3JzIGFzIHZhbHVlcyBmb3IgZGlmZmVyZW50IGtleXMuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYucHJvY2Vzc29yKHRleHQ9aW5wdXRfZGF0YSwgc3JjX2xhbmc9c3JjX2xhbmcsIHJldHVybl90ZW5zb3JzPSJwdCIpCgogICAgZGVmIF9wcm9jZXNzX2F1ZGlvX2lucHV0KHNlbGYsIGlucHV0X2RhdGE6IHN0ciwgc3JjX2xhbmc6IHN0cikgLT4gRGljdFtzdHIsIHRvcmNoLlRlbnNvcl06CiAgICAgICAgIiIiCiAgICAgICAgUHJvY2Vzc2VzIHRoZSBhdWRpbyBpbnB1dCBkYXRhIGFuZCByZXR1cm5zIGEgZGljdGlvbmFyeSBvZiB0ZW5zb3JzLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBpbnB1dF9kYXRhIChzdHIpOiBUaGUgcGF0aCB0byB0aGUgYXVkaW8gZmlsZS4KICAgICAgICAgICAgc3JjX2xhbmcgKHN0cik6IFRoZSBzb3VyY2UgbGFuZ3VhZ2Ugb2YgdGhlIGF1ZGlvLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBEaWN0W3N0ciwgdG9yY2guVGVuc29yXTogQSBkaWN0aW9uYXJ5IGNvbnRhaW5pbmcgdGhlIHByb2Nlc3NlZCB0ZW5zb3JzLgogICAgICAgICIiIgogICAgICAgIHdhdmVmb3JtLCBzYW1wbGVfcmF0ZSA9IHRvcmNoYXVkaW8ubG9hZChpbnB1dF9kYXRhKQogICAgICAgIGlmIHNhbXBsZV9yYXRlICE9IDE2MDAwOgogICAgICAgICAgICB3YXZlZm9ybSA9IHRvcmNoYXVkaW8uZnVuY3Rpb25hbC5yZXNhbXBsZSh3YXZlZm9ybSwgc2FtcGxlX3JhdGUsIDE2MDAwKQogICAgICAgIHJldHVybiBzZWxmLnByb2Nlc3NvcihhdWRpb3M9d2F2ZWZvcm0uc3F1ZWV6ZSgpLCBzcmNfbGFuZz1zcmNfbGFuZywgc2FtcGxpbmdfcmF0ZT0xNjAwMCwgcmV0dXJuX3RlbnNvcnM9InB0IikKCiAgICBkZWYgX2dlbmVyYXRlX2F1ZGlvKHNlbGYsIGlucHV0X2RhdGE6IERpY3Rbc3RyLCB0b3JjaC5UZW5zb3JdLCB0Z3RfbGFuZzogc3RyKSAtPiB0b3JjaC5UZW5zb3I6CiAgICAgICAgIiIiCiAgICAgICAgR2VuZXJhdGUgYW4gYXVkaW8gdGVuc29yIGJhc2VkIG9uIHRoZSBpbnB1dCBkYXRhIGFuZCB0YXJnZXQgbGFuZ3VhZ2UuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGlucHV0X2RhdGEgKERpY3Rbc3RyLCB0b3JjaC5UZW5zb3JdKTogQSBkaWN0aW9uYXJ5IGNvbnRhaW5pbmcgaW5wdXQgZGF0YSB0ZW5zb3JzLgogICAgICAgICAgICB0Z3RfbGFuZyAoc3RyKTogVGhlIHRhcmdldCBsYW5ndWFnZSBmb3IgdGhlIGdlbmVyYXRlZCBhdWRpby4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgdG9yY2guVGVuc29yOiBUaGUgZ2VuZXJhdGVkIGF1ZGlvIHRlbnNvci4KCiAgICAgICAgIiIiCiAgICAgICAgaW5wdXRfZGF0YSA9IHtrOiB2LnRvKHNlbGYuZGV2aWNlKSBmb3IgaywgdiBpbiBpbnB1dF9kYXRhLml0ZW1zKCl9CiAgICAgICAgcmV0dXJuIHNlbGYubW9kZWwuZ2VuZXJhdGUoKippbnB1dF9kYXRhLCB0Z3RfbGFuZz10Z3RfbGFuZylbMF0KCiAgICBkZWYgX2dlbmVyYXRlX3RleHQoc2VsZiwgaW5wdXRfZGF0YTogRGljdFtzdHIsIHRvcmNoLlRlbnNvcl0sIHRndF9sYW5nOiBzdHIpIC0+IHN0cjoKICAgICAgICAiIiIKICAgICAgICBHZW5lcmF0ZXMgdGV4dCBiYXNlZCBvbiB0aGUgaW5wdXQgZGF0YSBhbmQgdGFyZ2V0IGxhbmd1YWdlLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBpbnB1dF9kYXRhIChEaWN0W3N0ciwgdG9yY2guVGVuc29yXSk6IEEgZGljdGlvbmFyeSBjb250YWluaW5nIGlucHV0IGRhdGEgdGVuc29ycy4KICAgICAgICAgICAgdGd0X2xhbmcgKHN0cik6IFRoZSB0YXJnZXQgbGFuZ3VhZ2UgZm9yIHRoZSBnZW5lcmF0ZWQgdGV4dC4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgc3RyOiBUaGUgZ2VuZXJhdGVkIHRleHQuCiAgICAgICAgIiIiCiAgICAgICAgaW5wdXRfZGF0YSA9IHtrOiB2LnRvKHNlbGYuZGV2aWNlKSBmb3IgaywgdiBpbiBpbnB1dF9kYXRhLml0ZW1zKCl9CiAgICAgICAgb3V0cHV0X3Rva2VucyA9IHNlbGYubW9kZWwuZ2VuZXJhdGUoKippbnB1dF9kYXRhLCB0Z3RfbGFuZz10Z3RfbGFuZywgZ2VuZXJhdGVfc3BlZWNoPUZhbHNlKQogICAgICAgIHJldHVybiBzZWxmLnByb2Nlc3Nvci5kZWNvZGUob3V0cHV0X3Rva2Vuc1swXS50b2xpc3QoKVswXSwgc2tpcF9zcGVjaWFsX3Rva2Vucz1UcnVlKQoKICAgIGRlZiBfcHJlZGljdChzZWxmLCAqKmt3YXJncykgLT4gVHVwbGVbVW5pb25bc3RyLCBOb25lXSwgVW5pb25bdG9yY2guVGVuc29yLCBOb25lXV06CiAgICAgICAgIiIiCiAgICAgICAgQSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBpbnB1dCBkYXRhIGZvciBwcmVkaWN0aW9uLiAKICAgICAgICBSZXRyaWV2ZXMgaW5wdXQgZGF0YSwgdGFzayBzdHJpbmcsIHNvdXJjZSBhbmQgdGFyZ2V0IGxhbmd1YWdlcywgcHJlcHJvY2Vzc2VzIHRoZSBpbnB1dCBkYXRhIGJhc2VkIG9uIHRoZSB0YXNrIHN0cmluZywgCiAgICAgICAgZ2VuZXJhdGVzIG91dHB1dCBiYXNlZCBvbiB0aGUgaW5wdXQgYW5kIGxhbmd1YWdlcywgYW5kIHJldHVybnMgdGhlIG91dHB1dC4gCiAgICAgICAgTG9ncyBpbnRlcm1lZGlhdGUgaW5mb3JtYXRpb24gZm9yIGRlYnVnZ2luZy4gCiAgICAgICAgUmFpc2VzIGVycm9ycyBmb3IgcHJvY2Vzc2luZyBhbmQgcHJlZGljdGlvbiBmYWlsdXJlcy4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgKiprd2FyZ3M6IEEgZGljdGlvbmFyeSBjb250YWluaW5nIGlucHV0IGRhdGEsIHRhc2sgc3RyaW5nLCBzb3VyY2UgbGFuZ3VhZ2UsIGFuZCB0YXJnZXQgbGFuZ3VhZ2UuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIFR1cGxlW1VuaW9uW3N0ciwgTm9uZV0sIFVuaW9uW3RvcmNoLlRlbnNvciwgTm9uZV1dOiAKICAgICAgICAgICAgICAgIEEgdHVwbGUgY29udGFpbmluZyBlaXRoZXIgYSBzdHJpbmcgb3IgTm9uZSwgYW5kIGVpdGhlciBhIHRvcmNoLlRlbnNvciBvciBOb25lLCAKICAgICAgICAgICAgICAgIHJlcHJlc2VudGluZyB0aGUgcHJlZGljdGVkIG91dHB1dC4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlucHV0X2RhdGEgPSBrd2FyZ3NbJ2lucHV0J10KICAgICAgICAgICAgdGFza19zdHIgPSBrd2FyZ3NbJ3Rhc2tfc3RyJ10KICAgICAgICAgICAgc3JjX2xhbmcgPSBrd2FyZ3NbJ3NyY19sYW5nJ10KICAgICAgICAgICAgdGd0X2xhbmcgPSBrd2FyZ3NbJ3RndF9sYW5nJ10KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHRhc2tfc3RyLnN0YXJ0c3dpdGgoJ3MyJyk6CiAgICAgICAgICAgICAgICBpbnB1dF9kYXRhID0gc2VsZi5fcHJvY2Vzc19hdWRpb19pbnB1dChpbnB1dF9kYXRhLCBzcmNfbGFuZykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlucHV0X2RhdGEgPSBzZWxmLl9wcm9jZXNzX3RleHRfaW5wdXRzKGlucHV0X2RhdGEsIHNyY19sYW5nKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhzdHIoaW5wdXRfZGF0YSlbOjMwXSkKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKHR5cGUoaW5wdXRfZGF0YSkpCiAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zyhrd2FyZ3MpCiAgICAgICAgICAgIG91dHB1dCA9IE5vbmUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgc2VsZi50YXNrX3N0cmluZy5lbmRzd2l0aCgic3BlZWNoIik6CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gc2VsZi5fZ2VuZXJhdGVfYXVkaW8oaW5wdXRfZGF0YSwgdGd0X2xhbmcpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IHNlbGYuX2dlbmVyYXRlX3RleHQoaW5wdXRfZGF0YSwgdGd0X2xhbmcpCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyB0cmFuc2xhdGlvbjoge2V9IikKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJFcnJvciBwcm9jZXNzaW5nIHRyYW5zbGF0aW9uOiB7ZX0iKSBmcm9tIGUKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKG91dHB1dCkKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKHR5cGUob3V0cHV0KSkKICAgICAgICAgICAgcmV0dXJuIG91dHB1dAogICAgICAgIAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyB0cmFuc2xhdGlvbjoge2V9IikKICAgICAgICAgICAgcmFpc2UKICAgICAgICAKICAgIGRlZiBfcHJvY2Vzc19hdWRpb19vdXRwdXQoc2VsZiwgb3V0cHV0OiB0b3JjaC5UZW5zb3IpIC0+IHRvcmNoLlRlbnNvcjoKICAgICAgICAiIiIKICAgICAgICBQcm9jZXNzIHRoZSBhdWRpbyBvdXRwdXQgdGVuc29yIGFuZCByZXR1cm4gaXQgYXMgYSBieXRlcyBvYmplY3QuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIG91dHB1dCAodG9yY2guVGVuc29yKTogVGhlIGF1ZGlvIG91dHB1dCB0ZW5zb3IgdG8gYmUgcHJvY2Vzc2VkLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICB0b3JjaC5UZW5zb3I6IFRoZSBwcm9jZXNzZWQgYXVkaW8gb3V0cHV0IGFzIGEgYnl0ZXMgb2JqZWN0LgoKICAgICAgICBSYWlzZXM6CiAgICAgICAgICAgIFZhbHVlRXJyb3I6IElmIHRoZXJlIGlzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIGF1ZGlvIG91dHB1dC4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJ1ZmZlciA9IGlvLkJ5dGVzSU8oKQogICAgICAgICAgICB0b3JjaC5zYXZlKG91dHB1dCwgYnVmZmVyKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyBhdWRpbyBvdXRwdXQ6IHtlfSIpCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJFcnJvciBwcm9jZXNzaW5nIGF1ZGlvIG91dHB1dDoge2V9IikgZnJvbSBlCiAgICAgICAgcmV0dXJuIGJ1ZmZlci5nZXR2YWx1ZSgpCiAgICAKICAgIGRlZiBfcHJvY2Vzc19vdXRwdXQoc2VsZiwgb3V0cHV0OiBzdHIpIC0+IHN0cjoKICAgICAgICAiIiIKICAgICAgICBQcm9jZXNzIHRoZSBmaW5hbCBvdXRwdXQgdG8gZW5jb2RlIGl0IGluIGJhc2U2NCBhbmQgZGVjb2RlIGl0IHRvIHV0Zi04LgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBvdXRwdXQgKHN0cik6IFRoZSBmaW5hbCBvdXRwdXQgdG8gYmUgcHJvY2Vzc2VkLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBzdHI6IFRoZSBwcm9jZXNzZWQgb3V0cHV0IGFmdGVyIGVuY29kaW5nIGFuZCBkZWNvZGluZy4KICAgICAgICBSYWlzZXM6CiAgICAgICAgICAgIFZhbHVlRXJyb3I6IElmIHRoZXJlIGlzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIGZpbmFsIG91dHB1dC4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIG91dHB1dCA9IGJhc2U2NC5iNjRlbmNvZGUob3V0cHV0KS5kZWNvZGUoInV0Zi04IikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkVycm9yIHByb2Nlc3NpbmcgZmluYWwgb3V0cHV0OiB7ZX0iKQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyBmaW5hbCBvdXRwdXQ6IHtlfSIpIGZyb20gZQogICAgICAgIHJldHVybiBvdXRwdXQKCiAgICAKZGVmIHRleHQydGV4dCh0cmFuc2xhdGlvbjogVHJhbnNsYXRpb24sIG1pbmVyX3JlcXVlc3Q6IE9wdGlvbmFsW1RyYW5zbGF0aW9uUmVxdWVzdF0gPSBOb25lKToKICAgICIiIgogICAgR2VuZXJhdGVzIGEgdHJhbnNsYXRpb24gb2YgdGhlIGlucHV0IHRleHQgZnJvbSBFbmdsaXNoIHRvIEZyZW5jaCB1c2luZyB0aGUgZ2l2ZW4gVHJhbnNsYXRpb24gb2JqZWN0LgoKICAgIEFyZ3M6CiAgICAgICAgdHJhbnNsYXRpb24gKFRyYW5zbGF0aW9uKTogVGhlIFRyYW5zbGF0aW9uIG9iamVjdCB1c2VkIHRvIGdlbmVyYXRlIHRoZSB0cmFuc2xhdGlvbi4KICAgICAgICBtaW5lcl9yZXF1ZXN0IChPcHRpb25hbFtUcmFuc2xhdGlvblJlcXVlc3RdLCBvcHRpb25hbCk6IFRoZSBvcHRpb25hbCBUcmFuc2xhdGlvblJlcXVlc3Qgb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBkYXRhIGZvciB0aGUgdHJhbnNsYXRpb24uIERlZmF1bHRzIHRvIE5vbmUuCgogICAgUmV0dXJuczoKICAgICAgICBzdHI6IFRoZSB0cmFuc2xhdGVkIHRleHQgZnJvbSBFbmdsaXNoIHRvIEZyZW5jaC4KCiAgICBFeGFtcGxlOgogICAgICAgID4+PiB0cmFuc2xhdGlvbiA9IFRyYW5zbGF0aW9uKCkKICAgICAgICA+Pj4gbWluZXJfcmVxdWVzdCA9IFRyYW5zbGF0aW9uUmVxdWVzdChkYXRhPXsiaW5wdXQiOiAiSGVsbG8sIG15IG5hbWUgaXMgSm9obiBEb2UuIiwgInRhc2tfc3RyaW5nIjogInRleHQydGV4dCIsICJzb3VyY2VfbGFuZ3VhZ2UiOiAiRW5nbGlzaCIsICJ0YXJnZXRfbGFuZ3VhZ2UiOiAiRnJlbmNoIn0pCiAgICAgICAgPj4+IHRleHQydGV4dCh0cmFuc2xhdGlvbiwgbWluZXJfcmVxdWVzdCkKICAgICAgICAnQm9uam91ciwgamUgbSdhcHBlbGxlIEpvaG4gRG9lLicKICAgICIiIgogICAgdHJhbnNsYXRpb25fcmVxdWVzdCA9IG1pbmVyX3JlcXVlc3Qgb3IgVHJhbnNsYXRpb25SZXF1ZXN0KAogICAgICAgIGRhdGE9eyJpbnB1dCI6ICJIZWxsbywgbXkgbmFtZSBpcyBKb2huIERvZS4iLCAidGFza19zdHJpbmciOiAidGV4dDJ0ZXh0IiwgInNvdXJjZV9sYW5ndWFnZSI6ICJFbmdsaXNoIiwgInRhcmdldF9sYW5ndWFnZSI6ICJGcmVuY2gifQogICAgKQogICAgcmV0dXJuIHRyYW5zbGF0aW9uLnByb2Nlc3ModHJhbnNsYXRpb25fcmVxdWVzdCkKCgpkZWYgdGV4dDJzcGVlY2godHJhbnNsYXRpb246IFRyYW5zbGF0aW9uLCBtaW5lcl9yZXF1ZXN0OiBPcHRpb25hbFtUcmFuc2xhdGlvblJlcXVlc3RdID0gTm9uZSk6CiAgICAiIiIKICAgIEdlbmVyYXRlcyBzcGVlY2ggZnJvbSB0ZXh0IHVzaW5nIHRoZSBnaXZlbiBUcmFuc2xhdGlvbiBvYmplY3QuCgogICAgQXJnczoKICAgICAgICB0cmFuc2xhdGlvbiAoVHJhbnNsYXRpb24pOiBUaGUgVHJhbnNsYXRpb24gb2JqZWN0IHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHNwZWVjaC4KICAgICAgICBtaW5lcl9yZXF1ZXN0IChPcHRpb25hbFtUcmFuc2xhdGlvblJlcXVlc3RdLCBvcHRpb25hbCk6IFRoZSBvcHRpb25hbCBUcmFuc2xhdGlvblJlcXVlc3Qgb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBkYXRhIGZvciB0aGUgc3BlZWNoIGdlbmVyYXRpb24uIERlZmF1bHRzIHRvIE5vbmUuCgogICAgUmV0dXJuczoKICAgICAgICBVbmlvbltzdHIsIE5vbmVdOiBUaGUgZ2VuZXJhdGVkIHNwZWVjaCBhcyBhIHN0cmluZywgb3IgTm9uZSBpZiBhbiBlcnJvciBvY2N1cnJlZC4KICAgICIiIgogICAgdHJhbnNsYXRpb25fcmVxdWVzdCA9IG1pbmVyX3JlcXVlc3Qgb3IgVHJhbnNsYXRpb25SZXF1ZXN0KAogICAgICAgIGRhdGE9eyJpbnB1dCI6ICJIZWxsbywgbXkgbmFtZSBpcyBKb2huIERvZS4iLCAidGFza19zdHJpbmciOiAidGV4dDJzcGVlY2giLCAic291cmNlX2xhbmd1YWdlIjogIkVuZ2xpc2giLCAidGFyZ2V0X2xhbmd1YWdlIjogIkZyZW5jaCJ9CiAgICApCiAgICByZXR1cm4gdHJhbnNsYXRpb24ucHJvY2Vzcyh0cmFuc2xhdGlvbl9yZXF1ZXN0KQoKCmRlZiBzcGVlY2gydGV4dCh0cmFuc2xhdGlvbjogVHJhbnNsYXRpb24sIG1pbmVyX3JlcXVlc3Q6IE9wdGlvbmFsW1RyYW5zbGF0aW9uUmVxdWVzdF0gPSBOb25lKToKICAgICIiIgogICAgQSBmdW5jdGlvbiB0aGF0IGNvbnZlcnRzIHNwZWVjaCBpbnB1dCB0byB0ZXh0IHVzaW5nIGEgZ2l2ZW4gVHJhbnNsYXRpb24gb2JqZWN0LgogICAgCiAgICBBcmdzOgogICAgICAgIHRyYW5zbGF0aW9uIChUcmFuc2xhdGlvbik6IFRoZSBUcmFuc2xhdGlvbiBvYmplY3QgdXNlZCBmb3IgdGhlIGNvbnZlcnNpb24uCiAgICAgICAgbWluZXJfcmVxdWVzdCAoT3B0aW9uYWxbVHJhbnNsYXRpb25SZXF1ZXN0XSwgb3B0aW9uYWwpOiBBZGRpdGlvbmFsIGRhdGEgZm9yIHRoZSBjb252ZXJzaW9uLiBEZWZhdWx0cyB0byBOb25lLgogICAgICAgIAogICAgUmV0dXJuczoKICAgICAgICBUaGUgcHJvY2Vzc2VkIHRleHQgb3V0cHV0LgogICAgIiIiCiAgICB0cmFuc2xhdGlvbl9yZXF1ZXN0ID0gbWluZXJfcmVxdWVzdCBvciBUcmFuc2xhdGlvblJlcXVlc3QoCiAgICAgICAgZGF0YT17ImlucHV0IjogIm1vZHVsZXMvdHJhbnNsYXRpb24vaW4vYXVkaW9fcmVxdWVzdC53YXYiLCAidGFza19zdHJpbmciOiAic3BlZWNoMnRleHQiLCAic291cmNlX2xhbmd1YWdlIjogIkVuZ2xpc2giLCAidGFyZ2V0X2xhbmd1YWdlIjogIkZyZW5jaCJ9CiAgICApCiAgICByZXR1cm4gdHJhbnNsYXRpb24ucHJvY2Vzcyh0cmFuc2xhdGlvbl9yZXF1ZXN0KQoKCmRlZiBzcGVlY2gyc3BlZWNoKHRyYW5zbGF0aW9uOiBUcmFuc2xhdGlvbiwgbWluZXJfcmVxdWVzdDogT3B0aW9uYWxbVHJhbnNsYXRpb25SZXF1ZXN0XSA9IE5vbmUpOgogICAgIiIiCiAgICBDb252ZXJ0cyBzcGVlY2ggaW5wdXQgdG8gc3BlZWNoIG91dHB1dCB1c2luZyBhIGdpdmVuIFRyYW5zbGF0aW9uIG9iamVjdC4KICAgIAogICAgQXJnczoKICAgICAgICB0cmFuc2xhdGlvbiAoVHJhbnNsYXRpb24pOiBUaGUgVHJhbnNsYXRpb24gb2JqZWN0IHVzZWQgZm9yIHRoZSBjb252ZXJzaW9uLgogICAgICAgIG1pbmVyX3JlcXVlc3QgKE9wdGlvbmFsW1RyYW5zbGF0aW9uUmVxdWVzdF0sIG9wdGlvbmFsKTogQWRkaXRpb25hbCBkYXRhIGZvciB0aGUgY29udmVyc2lvbi4gRGVmYXVsdHMgdG8gTm9uZS4KICAgICAgICAKICAgIFJldHVybnM6CiAgICAgICAgVGhlIHByb2Nlc3NlZCBzcGVlY2ggb3V0cHV0LgogICAgIiIiCiAgICB0cmFuc2xhdGlvbl9yZXF1ZXN0ID0gbWluZXJfcmVxdWVzdCBvciBUcmFuc2xhdGlvblJlcXVlc3QoCiAgICAgICAgZGF0YT17ImlucHV0IjogIm1vZHVsZXMvdHJhbnNsYXRpb24vaW4vYXVkaW9fcmVxdWVzdC53YXYiLCAidGFza19zdHJpbmciOiAic3BlZWNoMnNwZWVjaCIsICJzb3VyY2VfbGFuZ3VhZ2UiOiAiRW5nbGlzaCIsICJ0YXJnZXRfbGFuZ3VhZ2UiOiAiRnJlbmNoIn0KICAgICkKICAgIHJldHVybiB0cmFuc2xhdGlvbi5wcm9jZXNzKHRyYW5zbGF0aW9uX3JlcXVlc3QpCiAgICAKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICB0cmFuc2xhdGlvbiA9IFRyYW5zbGF0aW9uKFRyYW5zbGF0aW9uQ29uZmlnKCkpCiAgICByZXN1bHQgPSBzcGVlY2gydGV4dCh0cmFuc2xhdGlvbikKICAgIHByaW50KGYic3BlZWNoMnRleHQ6IHtyZXN1bHR9IikKICAgIHJlc3VsdCA9IHNwZWVjaDJzcGVlY2godHJhbnNsYXRpb24pCiAgICBwcmludChmInNwZWVjaDJzcGVlY2g6IHtyZXN1bHR9IikKICAgIHJlc3VsdCA9IHRleHQydGV4dCh0cmFuc2xhdGlvbikKICAgIHByaW50KGYidGV4dDJ0ZXh0OiB7cmVzdWx0fSIpCiAgICByZXN1bHQgPSB0ZXh0MnNwZWVjaCh0cmFuc2xhdGlvbikKICAgIHByaW50KGYidGV4dDJzcGVlY2g6IHtyZXN1bHR9IikKICAgICAgICAKICAgIA=='),
    ('install_translation.sh', 'IyEvYmluL2Jhc2gKCnNldCAtZQoKc291cmNlIC4vLnZlbnYvYmluL2FjdGl2YXRlCgpweXRob24gLW0gcGlwIGluc3RhbGwgLS11cGdyYWRlIHBpcAoKcGlwIGluc3RhbGwgc2V0dXB0b29scyB3aGVlbCBnbnVyZWFkbGluZQpwaXAgaW5zdGFsbCBzbmRmaWxlIGdnbWwtcHl0aG9uIHN1YnN0cmF0ZS1pbnRlcmZhY2UgYml0dGVuc29yIGxvZ3VydQpwaXAgaW5zdGFsbCBmYXN0YXBpIHV2aWNvcm4gbG9ndXJ1IHJlcXVlc3RzIHN1YnN0cmF0ZS1pbnRlcmZhY2Ugc2VudGVuY2VwaWVjZSBwcm90b2J1ZiBzY2lweQoKaWYgY29tbWFuZCAtdiBhcHQtZ2V0ID4vZGV2L251bGw7IHRoZW4KICAgIHN1ZG8gYXB0LWdldCB1cGRhdGUgJiYgc3VkbyBhcHQtZ2V0IHVwZ3JhZGUgLXkKICAgIHN1ZG8gYXB0LWdldCBpbnN0YWxsIHB5dGhvbjMgcHl0aG9uMy1kZXYgcHl0aG9uMy12ZW52IHB5dGhvbjMtcGlwIHB5dGhvbi1pcy1weXRob24zIGxpYnNuZGZpbGUxLWRldiBsaWJnbXAxMC1kZXYgLXkKZWxpZiBjb21tYW5kIC12IHBhY21hbiA+L2Rldi9udWxsOyB0aGVuCiAgICBzdWRvIHBhY21hbiAtU3l1IC0tbm9jb25maXJtCiAgICBzdWRvIHBhY21hbiAtUyBweXRob24gcHl0aG9uLXBpcCBweXRob24tdmlydHVhbGVudiBsaWJzbmRmaWxlIGdtcCAtLW5vY29uZmlybQplbHNlCiAgICBlY2hvICJUaGlzIHNjcmlwdCByZXF1aXJlcyBhIExpbnV4IGRpc3RyaWJ1dGlvbiB3aXRoIGVpdGhlciBhcHQgb3IgcGFjbWFuLiIKICAgIGV4aXQgMQpmaQoKaWYgWyAhIC1kICIuL21vZHVsZXMvdHJhbnNsYXRpb24vc2VhbWxlc3MiIF07IHRoZW4KICAgIGdpdCBjbG9uZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2tyZXNlYXJjaC9zZWFtbGVzc19jb21tdW5pY2F0aW9uLmdpdCAuL21vZHVsZXMvdHJhbnNsYXRpb24vc2VhbWxlc3MKICAgIApmaQpwaXAgaW5zdGFsbCAuL21vZHVsZXMvdHJhbnNsYXRpb24vc2VhbWxlc3MKcGlwIGluc3RhbGwgZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9odWdnaW5nZmFjZS90cmFuc2Zvcm1lcnMgdG9yY2ggdG9yY2hhdWRpbyB0b3JjaHZpc2lvbiBmYWlyc2VxMgoKbWtkaXIgLXAgLi9tb2R1bGVzL3RyYW5zbGF0aW9uL2luCgpta2RpciAtcCAuL21vZHVsZXMvdHJhbnNsYXRpb24vb3V0Cg=='),
]

for relative_path, encoded_content in file_data:
    full_path = os.path.join(folder_path, relative_path)
    os.makedirs(os.path.dirname(full_path), exist_ok=True)
    with open(full_path, 'wb') as f:
        f.write(base64.b64decode(encoded_content))
    print(f'Created: {full_path}')
command = ['bash', 'modules/translation/install_translation.sh']
subprocess.run(command, check=True)
